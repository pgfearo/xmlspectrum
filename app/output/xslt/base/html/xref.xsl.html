<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xref.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><a class="solar" href="../../../index.html"><span class="enxsl" id="e?{http://www.w3.org/1999/XSL/Transform}stylesheet">xsl:stylesheet</span></a><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:h</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns:t</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:u</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/unittests#</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:xlink</span><span class="atneq">=</span><span class="z">'</span><span class="av">http://www.w3.org/1999/xlink</span><span class="z">'</span><span class="z">
                                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                		</span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fn h m t u xlink xs</span><span class="z">"</span><span class="z">
                                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="ww" id="w93"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?use.role.as.xrefstyle">use.role.as.xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">0</span><span class="z">"</span><span id="wx107" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w113"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:anchor</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w123"><span class="es">&lt;</span><span class="en">span</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w127"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx135" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx139" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx143" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w149"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:link</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w165"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Template for processing link elements</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx171" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w173"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w177"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template matches </span><span class="ww" id="w181"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">link</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx187" class="ec">&gt;</span></span><span class="txt"> elements. There are four
possibilities to consider: the link may have content or it may be
empty and the link may have an </span><span class="ww" id="w189"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xlink:href</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx201" class="ec">&gt;</span></span><span class="txt">
attribute or a </span><span class="ww" id="w203"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">linkend</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx215" class="ec">&gt;</span></span><span class="txt"> attribute:</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx219" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w221"><span class="es">&lt;</span><span class="en">informaltable</span><span class="z"> </span><span class="atn">rowheader</span><span class="atneq">=</span><span class="z">"</span><span class="av">firstcol</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w231"><span class="es">&lt;</span><span class="en">tgroup</span><span class="z"> </span><span class="atn">cols</span><span class="atneq">=</span><span class="z">"</span><span class="av">3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w241"><span class="es">&lt;</span><span class="en">thead</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w245"><span class="es">&lt;</span><span class="en">row</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w249"><span class="es">&lt;</span><span class="en">entry</span><span id="wx251" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ww" id="w253"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Has Content</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx259" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w261"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Is Empty</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx267" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">row</span><span id="wx271" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">thead</span><span id="wx275" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w277"><span class="es">&lt;</span><span class="en">tbody</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w281"><span class="es">&lt;</span><span class="en">row</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w285"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Has </span><span class="ww" id="w289"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xlink:href</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx301" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx305" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w307"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Content is a link to the specified URI.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx313" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w315"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">The specified URI is used as the content. It is a link to the
specified URI.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx321" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">row</span><span id="wx325" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w327"><span class="es">&lt;</span><span class="en">row</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w331"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Has </span><span class="ww" id="w335"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">linkend</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx347" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx351" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w353"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Content is a link to the element identified.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx359" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w361"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Semantically equivalent to an </span><span class="ww" id="w365"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">xref</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx371" class="ec">&gt;</span></span><span class="txt"> to the element
identified.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx375" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">row</span><span id="wx379" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">tbody</span><span id="wx383" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">tgroup</span><span id="wx387" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">informaltable</span><span id="wx391" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx395" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx399" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w401"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:link</span><span class="z">"</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/ns/docbook}link">db:link</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w417"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="17" select="quick">string</span></a><span class="parenthesis">(</span><span class="qname" start="8" select="quick">db:alt</span><span class="filter" start="14" pair-end="16" select="quick">[</span><span class="numeric" start="15">1</span><span class="filter" start="16">]</span><span class="parenthesis" start="17">)</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx443" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w445"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?href">href</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-iri-to-uri" class="solar"><span class="function" start="1" pair-end="31" select="quick">iri-to-uri</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="12" pair-end="30" select="quick">string</span></a><span class="parenthesis">(</span><span class="axis" start="19">@</span><span class="qname" start="20" select="quick">xlink:href</span><span class="parenthesis" start="30">)</span><span class="parenthesis" start="31">)</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx472" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w474"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w478"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w490"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w494"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w510"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$href</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w522"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx530" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w532"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w548"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx562" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx566" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w568"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx570" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx574" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx578" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w580"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w584"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="25" select="quick">not</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="5" pair-end="24" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="axis" start="14">@</span><span class="qname" start="15" select="quick">linkend</span><span class="op" start="22">,</span><span class="context" start="23">.</span><span class="parenthesis" start="24">)</span><span class="parenthesis" start="25">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w603"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w607"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Attempt to link to undefined ID: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx613" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w615"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">linkend</span><span class="z">"</span><span id="wx624" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx628" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx632" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w634"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">brokenlink</span><span class="z">"</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="av">#</span><span class="op">{</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">linkend</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w654"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx662" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w664"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w680"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx694" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx698" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w700"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx702" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx706" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx710" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx714" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx718" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w720"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w724"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w728"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w744"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$href</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w756"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx764" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w766"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="z">"</span><span id="wx774" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx778" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx782" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w784"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w788"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/xref.xsl.html#t?{http://docbook.org/ns/docbook}xref" class="solar"><span class="tcall">db:xref</span></a><span class="z">"</span><span id="wx796" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx800" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx804" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx808" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx812" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx816" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w822"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:xref</span><span class="z">"</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:xref</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w844"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Template for processing xref elements</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx850" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w852"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w856"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template matches </span><span class="ww" id="w860"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">xref</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx866" class="ec">&gt;</span></span><span class="txt"> elements. There are two
possibilities to consider: the </span><span class="ww" id="w868"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">xref</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx874" class="ec">&gt;</span></span><span class="txt"> may have an
</span><span class="ww" id="w876"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xlink:href</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx888" class="ec">&gt;</span></span><span class="txt">
attribute or a </span><span class="ww" id="w890"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">linkend</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx902" class="ec">&gt;</span></span><span class="txt"> attribute</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx906" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w908"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">For the moment, I don't know what to do about the href case.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx914" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx918" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx922" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w924"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:xref</span><span class="z">"</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/ns/docbook}xref">db:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w940"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?linkend">linkend</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">linkend</span><span class="z">"</span><span id="wx955" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w957"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target">target</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="1" pair-end="20" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$linkend</span><span class="op" start="18">,</span><span class="context" start="19">.</span><span class="parenthesis" start="20">)</span><span class="filter" start="21" pair-end="23" select="quick">[</span><span class="numeric" start="22">1</span><span class="filter" start="23">]</span><span class="z">"</span><span id="wx979" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w981"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refelem">refelem</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="18" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$target</span><span class="parenthesis" start="18">)</span><span class="z">"</span><span id="wx998" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1000"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="7" pair-end="26" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$linkend</span><span class="op" start="24">,</span><span class="context" start="25">.</span><span class="parenthesis" start="26">)</span><span class="parenthesis" start="27">)</span><span class="whitespace" start="28"> </span><span class="qname" start="29" select="quick">&amp;</span><span class="op" start="30">gt</span><span class="qname" start="32" select="quick">;</span><span class="whitespace" start="33"> </span><span class="numeric" start="34">1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1024"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1028"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: the ID '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1034" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1036"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$linkend</span><span class="z">"</span><span id="wx1044" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1046"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">' is not unique.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1052" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1056" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1060" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1062"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1066"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="14" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$target</span><span class="parenthesis" start="14">)</span><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><span class="numeric" start="18">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1083"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1087"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">XRef to nonexistent id: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1093" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w1095"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$linkend</span><span class="z">"</span><span id="wx1103" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1107" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1109"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">formatting-error</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1119"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx1127" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1129"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1135" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx1139" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1143" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w1145"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">endterm</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1156"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?etarget">etarget</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="1" pair-end="20" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="axis" start="10">@</span><span class="qname" start="11" select="quick">endterm</span><span class="op" start="18">,</span><span class="context" start="19">.</span><span class="parenthesis" start="20">)</span><span class="filter" start="21" pair-end="23" select="quick">[</span><span class="numeric" start="22">1</span><span class="filter" start="23">]</span><span class="z">"</span><span id="wx1179" class="sc">/&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1181"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="7" pair-end="26" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="axis" start="16">@</span><span class="qname" start="17" select="quick">endterm</span><span class="op" start="24">,</span><span class="context" start="25">.</span><span class="parenthesis" start="26">)</span><span class="parenthesis" start="27">)</span><span class="whitespace" start="28"> </span><span class="qname" start="29" select="quick">&amp;</span><span class="op" start="30">gt</span><span class="qname" start="32" select="quick">;</span><span class="whitespace" start="33"> </span><span class="numeric" start="34">1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1206"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1210"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: the ID '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1216" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1218"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">endterm</span><span class="z">"</span><span id="wx1227" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1229"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">' is not unique.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1235" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1239" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1243" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1245"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1249"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="15" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$etarget</span><span class="parenthesis" start="15">)</span><span class="whitespace" start="16"> </span><span class="op" start="17">=</span><span class="whitespace" start="18"> </span><span class="numeric" start="19">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w1266"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1270"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Endterm points to nonexistent id: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1276" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1278"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">endterm</span><span class="z">"</span><span id="wx1287" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1291" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1293"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1310"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx1318" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1320"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">formatting-error</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w1330"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1336" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx1340" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1344" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1348" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w1350"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1354"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1371"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx1379" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1381"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$etarget</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:endterm</span><span class="z">"</span><span id="wx1395" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1399" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1403" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1407" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1411" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w1413"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="step" start="8">/</span><span class="axis" start="9">@</span><span class="qname" start="10" select="quick">xreflabel</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1426"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1443"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/xref.xsl.html#t?xreflabel" class="solar"><span class="tcall">xreflabel</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1453"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span id="wx1467" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1471" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1475" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1479" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w1481"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1485"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span id="wx1499" class="sc">/&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1501"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1518"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="step" start="8">/</span><span class="qname" start="9" select="quick">db:info</span><span class="step" start="16">/</span><span class="qname" start="17" select="quick">db:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1532"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="32" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$target</span><span class="step" start="15">/</span><span class="qname" start="16" select="quick">db:info</span><span class="step" start="23">/</span><span class="qname" start="24" select="quick">db:title</span><span class="parenthesis" start="32">)</span><span class="z">"</span><span id="wx1553" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1557" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1559"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1575"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1589" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1591"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1601"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w1605"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">role</span><span class="whitespace" start="6"> </span><span class="op" start="7">and</span><span class="whitespace" start="10"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="11" pair-end="25" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="15">@</span><span class="qname" start="16" select="quick">xrefstyle</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                			      </span><span class="op" start="36">and</span><span class="whitespace" start="39"> </span><a href="../../../xslt/base/html/xref.xsl.html#v?use.role.as.xrefstyle" class="solar"><span class="variable" start="40" select="quick">$use.role.as.xrefstyle</span></a><span class="whitespace" start="62"> </span><span class="op" start="63">!=</span><span class="whitespace" start="65"> </span><span class="numeric" start="66">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w1632"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">role</span><span class="z">"</span><span id="wx1641" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1645" class="ec">&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w1647"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w1651"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">xrefstyle</span><span class="z">"</span><span id="wx1660" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1664" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1668" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:with-param</span><span id="wx1672" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1676" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1680" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1682"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span id="wx1696" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1700" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1704" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1708" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1710"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> FIXME: handle the things that are special about biblioref! </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w1724"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/xref.xsl.html#t?{http://docbook.org/ns/docbook}xref" class="solar"><span class="tcall">db:xref</span></a><span class="z">"</span><span id="wx1732" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1736" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1742"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xreflabel</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1758"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Template for processing xreflabels</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1764" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1766"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1770"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template is used to insert the markup associated with an
</span><span class="ww" id="w1774"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">'</span><span class="av">attribute</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">xreflabel</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx1786" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1790" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx1794" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1796"><span class="es">&lt;</span><span class="en">u:unittests</span><span class="z"> </span><span class="atn">template</span><span class="atneq">=</span><span class="z">"</span><span class="av">xreflabel</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1806"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1810"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1826"><span class="es">&lt;</span><span class="en">para</span><span class="z"> </span><span class="atn">xreflabel</span><span class="atneq">=</span><span class="z">"</span><span class="av">LabelMe</span><span class="z">"</span><span id="wx1834" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx1838" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1840"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'LabelMe'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx1846" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx1850" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w1852"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1856"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1872"><span class="es">&lt;</span><span class="en">para</span><span class="z"> </span><span class="atn">role</span><span class="atneq">=</span><span class="z">"</span><span class="av">I-Have-No-XRefLabel</span><span class="z">"</span><span id="wx1880" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx1884" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1886"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">''</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx1892" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx1896" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">u:unittests</span><span id="wx1900" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx1904" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1906"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?xreflabel">xreflabel</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> called to process an xreflabel...you might use this to make  </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> xreflabels come out in the right font for different targets, </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> for example. </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w1934"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target">target</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1948" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w1950"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="step" start="8">/</span><span class="axis" start="9">@</span><span class="qname" start="10" select="quick">xreflabel</span><span class="z">"</span><span id="wx1961" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1965" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1971"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:olink</span><span class="z">"</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}olink">t:olink</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1987"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?localinfo">localinfo</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">localinfo</span><span class="z">"</span><span id="wx2002" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> olinks resolved by stylesheet and target database </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w2008"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?targetdoc.att">targetdoc.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">targetdoc</span><span class="z">"</span><span id="wx2023" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2025"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?targetptr.att">targetptr.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">targetptr</span><span class="z">"</span><span id="wx2040" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2042"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.lang">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/l10n.xsl.html#f?{http://docbook.org/xslt/ns/extension}l10n-language" class="solar"><span class="function" start="1" pair-end="25" select="quick">f:l10n-language</span></a><span class="parenthesis">(</span><span class="context" start="17">.</span><span class="op" start="18">,</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="19" pair-end="24" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="24">)</span><span class="parenthesis" start="25">)</span><span class="z">"</span><span id="wx2063" class="sc">/&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2065"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target.database.filename">target.database.filename</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2075"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}select-target-database" class="solar"><span class="tcall">t:select-target-database</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2085"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetdoc.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetdoc.att</span><span class="z">"</span><span id="wx2099" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2101"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetptr.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetptr.att</span><span class="z">"</span><span id="wx2115" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2117"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2131" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2135" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2139" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2141"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target.database">target.database</span><span class="z">"</span><span class="z"> 
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="37" select="quick">document</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$target.database.filename</span><span class="op" start="35">,</span><span class="step" start="36">/</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span id="wx2160" class="sc">/&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2162"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#v?olink.debug" class="solar"><span class="variable" start="1" select="quick">$olink.debug</span></a><span class="whitespace" start="13"> </span><span class="op" start="14">!=</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2176"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2180"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Olink debug: root element of target.database '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2186" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2188"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database.filename</span><span class="z">"</span><span id="wx2196" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2198"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">' is '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2204" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2206"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="33" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$target.database</span><span class="step" start="28">/</span><span class="qname" start="29" select="quick">*</span><span class="filter" start="30" pair-end="32" select="quick">[</span><span class="numeric" start="31">1</span><span class="filter" start="32">]</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span id="wx2222" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2224"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">'.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2230" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx2234" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2238" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2240"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.key">olink.key</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2250"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}select-olink-key" class="solar"><span class="tcall">t:select-olink-key</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2260"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetdoc.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetdoc.att</span><span class="z">"</span><span id="wx2274" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2276"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetptr.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetptr.att</span><span class="z">"</span><span id="wx2290" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2292"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2306" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2308"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2322" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2326" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2330" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2332"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string-length" class="solar"><span class="function" start="1" pair-end="25" select="quick">string-length</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$olink.key</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26"> </span><span class="op" start="27">=</span><span class="whitespace" start="28"> </span><span class="numeric" start="29">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2349"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2353"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Error: unresolved olink: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2359" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2361"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">targetdoc/targetptr = '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2367" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2369"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetdoc.att</span><span class="z">"</span><span id="wx2377" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2379"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">/</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2385" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2387"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetptr.att</span><span class="z">"</span><span id="wx2395" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2397"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">'.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2403" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx2407" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2411" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2413"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?href">href</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2423"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}make-olink-href" class="solar"><span class="tcall">t:make-olink-href</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2433"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2447" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2449"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2463" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2467" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2471" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2473"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hottext">hottext</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2483"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}olink-hottext" class="solar"><span class="tcall">t:olink-hottext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2493"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2507" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2509"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2523" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2525"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2539" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2543" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2547" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2549"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.docname.citation">olink.docname.citation</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2559"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}olink-document-citation" class="solar"><span class="tcall">t:olink-document-citation</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2569"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2583" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2585"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2599" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2601"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2615" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2619" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2623" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2625"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.page.citation">olink.page.citation</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2635"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}olink-page-citation" class="solar"><span class="tcall">t:olink-page-citation</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2645"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2659" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2661"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2675" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2677"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2691" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2695" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2699" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2701"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2705"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2721"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$href</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w2739"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$hottext</span><span class="z">"</span><span id="wx2747" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx2751" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2753"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.page.citation</span><span class="z">"</span><span id="wx2761" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2763"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.docname.citation</span><span class="z">"</span><span id="wx2771" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2775" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2777"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2781"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2791"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$hottext</span><span class="z">"</span><span id="wx2799" class="sc">/&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx2803" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2805"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.page.citation</span><span class="z">"</span><span id="wx2813" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2815"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.docname.citation</span><span class="z">"</span><span id="wx2823" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2827" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2831" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2835" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2837"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">pagenumber.markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> no-op in HTML </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2859" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2861"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}olink-outline">t:olink-outline</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2871"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?outline.base.uri">outline.base.uri</span><span class="z">"</span><span id="wx2879" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2881"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?localinfo">localinfo</span><span class="z">"</span><span id="wx2889" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2891"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?return">return</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">href</span><span class="z">"</span><span id="wx2905" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2907"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?outline-file">outline-file</span><span class="z">"</span><span class="z">
                              </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="76" select="quick">concat</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$outline.base.uri</span><span class="op" start="25">,</span><span class="whitespace" start="26">
                                                     </span><a href="../../../xslt/base/common/olink.xsl.html#v?olink.outline.ext" class="solar"><span class="variable" start="58" select="quick">$olink.outline.ext</span></a><span class="parenthesis" start="76">)</span><span class="z">"</span><span id="wx2927" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2929"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?outline">outline</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="25" select="quick">document</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$outline-file</span><span class="op" start="23">,</span><span class="context" start="24">.</span><span class="parenthesis" start="25">)</span><span class="step" start="26">/</span><span class="qname" start="27" select="quick">div</span><span class="z">"</span><span id="wx2950" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2952"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node-href">node-href</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2962"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2966"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$localinfo</span><span class="whitespace" start="11"> </span><span class="op" start="12">!=</span><span class="whitespace" start="14"> </span><span class="op">'</span><span class="literal" start="15"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2982"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">//</span><span class="qname" start="11" select="quick">*</span><span class="filter" start="12" pair-end="27" select="quick">[</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">id</span><span class="op" start="16">=</span><span class="variable" start="17" select="quick">$localinfo</span><span class="filter" start="27">]</span><span class="z">"</span><span id="wx3004" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3006"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">href</span><span class="z">"</span><span id="wx3017" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3021" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3023"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3027"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">/</span><span class="axis" start="10">@</span><span class="qname" start="11" select="quick">href</span><span class="z">"</span><span id="wx3038" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3042" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3046" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3050" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3052"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node-xref">node-xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3062"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3066"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$localinfo</span><span class="whitespace" start="11"> </span><span class="op" start="12">!=</span><span class="whitespace" start="14"> </span><span class="op">'</span><span class="literal" start="15"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3082"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">//</span><span class="qname" start="11" select="quick">*</span><span class="filter" start="12" pair-end="27" select="quick">[</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">id</span><span class="op" start="16">=</span><span class="variable" start="17" select="quick">$localinfo</span><span class="filter" start="27">]</span><span class="z">"</span><span id="wx3104" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3106"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="qname" start="7" select="quick">xref</span><span class="z">"</span><span id="wx3116" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3120" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3122"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3126"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">xref</span><span class="z">"</span><span id="wx3136" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3140" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3144" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3148" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3150"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3154"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$return</span><span class="whitespace" start="8"> </span><span class="op" start="9">=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11">href</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3170"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-href</span><span class="z">"</span><span id="wx3178" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3182" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3184"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$return</span><span class="whitespace" start="8"> </span><span class="op" start="9">=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11">xref</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3200"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-xref</span><span class="z">"</span><span id="wx3208" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3212" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3214"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3218"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-xref</span><span class="z">"</span><span id="wx3226" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3230" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3234" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3238" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3244"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-title-markup</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3260"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting title markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3266" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3268"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3272"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert title markup. Any element processed
in this mode should generate its title.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3278" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3282" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3286" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3288"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3304"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3312" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3314"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3322" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3324"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span id="wx3332" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3334"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3338"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$purpose</span><span class="whitespace" start="9"> </span><span class="op" start="10">=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">xref</span><span class="op">'</span><span class="whitespace" start="18"> </span><span class="op" start="19">and</span><span class="whitespace" start="22"> </span><span class="qname" start="23" select="quick">db:info</span><span class="step" start="30">/</span><span class="qname" start="31" select="quick">db:titleabbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3360"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx3374" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3378" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3380"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3384"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx3392" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3396" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3400" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3404" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3406"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:chapter</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:appendix</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3424"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3432" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3434"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3442" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3444"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span id="wx3452" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3454"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3458"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$purpose</span><span class="whitespace" start="9"> </span><span class="op" start="10">=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">xref</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3474"><span class="es">&lt;</span><span class="en">i</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3478"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx3486" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">i</span><span id="wx3490" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3494" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3496"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3500"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx3508" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3512" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3516" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3520" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3526"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-subtitle-markup</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3542"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting subtitle markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3548" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3550"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3554"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert subtitle markup. Any element processed
in this mode should generate its subtitle.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3560" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3564" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3568" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3570"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3586"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3594" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3596"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3604" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3606"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?subtitle">subtitle</span><span class="z">"</span><span id="wx3614" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3616"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$subtitle</span><span class="z">"</span><span id="wx3624" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3628" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3634"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-label-markup</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3650"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting label markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3656" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3658"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3662"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert label markup. Any element processed
in this mode should generate its label (number).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3668" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3672" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3676" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3678"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-label-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3694"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3702" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3704"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3712" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3714"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span id="wx3722" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3724"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span id="wx3732" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3736" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3742"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-pagenumber-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3758"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting page number markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3764" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3766"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3770"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert page number markup. Any element processed
in this mode should generate its page number.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3776" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3780" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3784" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3786"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-pagenumber-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3802"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3810" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3812"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3820" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3822"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pagenumber">pagenumber</span><span class="z">"</span><span id="wx3830" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3832"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pagenumber</span><span class="z">"</span><span id="wx3840" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3844" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3850"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-direction-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3866"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting direction markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3872" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3874"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3878"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert direction. Any element processed
in this mode should generate its direction number. The direction is
calculated from a reference and a referent (above or below, for example).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3884" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3888" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3892" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3894"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-direction-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3910"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3918" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3920"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3928" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3930"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?direction">direction</span><span class="z">"</span><span id="wx3938" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3940"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$direction</span><span class="z">"</span><span id="wx3948" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3952" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3958"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-olink-docname-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3974"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting </span><span class="ww" id="w3978"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">olink</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3984" class="ec">&gt;</span></span><span class="txt"> document name markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3988" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3990"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3994"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert </span><span class="ww" id="w3998"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">olink</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4004" class="ec">&gt;</span></span><span class="txt"> document name markup.
Any element processed in this mode should generate its document name.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4008" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4012" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4016" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4018"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-olink-docname-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4034"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx4042" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4044"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx4052" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4054"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?docname">docname</span><span class="z">"</span><span id="wx4062" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4064"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">olinkdocname</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4074"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$docname</span><span class="z">"</span><span id="wx4082" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx4086" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4090" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4096"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:endterm</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4112"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for processing endterms</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4118" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4120"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4124"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert the markup associated with an
</span><span class="ww" id="w4128"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">'</span><span class="av">attribute</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">endterm</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4140" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4144" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4148" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4152" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4154"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:endterm</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> Process the children of the endterm element </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w4174"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?endterm">endterm</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4184"><span class="es">&lt;</span><span class="en">span</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4188"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">child::</span><span class="node" start="8" pair-end="13" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx4199" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx4203" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4207" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4209"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$endterm</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4225" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4229" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4235"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4251"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for removing IDs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4257" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4259"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4263"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode processes result (XHTML) markup, removing all ID
attributes.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4269" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4273" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4277" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4279"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4295"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4299"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="12" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="11">.</span><span class="parenthesis" start="12">)</span><span class="whitespace" start="13"> </span><span class="op" start="14">=</span><span class="whitespace" start="15"> </span><span class="qname" start="16" select="quick">h:a</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4316"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4320"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="25" select="quick">(</span><span class="axis" start="2">@</span><span class="qname" start="3" select="quick">name</span><span class="whitespace" start="7"> </span><span class="op" start="8">and</span><span class="whitespace" start="11"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="12" pair-end="20" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="18">@</span><span class="qname" start="19" select="quick">*</span><span class="parenthesis" start="20">)</span><span class="whitespace" start="21"> </span><span class="op" start="22">=</span><span class="whitespace" start="23"> </span><span class="numeric" start="24">1</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                			</span><span class="op" start="30">or</span><span class="whitespace" start="32"> </span><span class="parenthesis" start="33" pair-end="55" select="quick">(</span><span class="axis" start="34">@</span><span class="qname" start="35" select="quick">id</span><span class="whitespace" start="37"> </span><span class="op" start="38">and</span><span class="whitespace" start="41"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="42" pair-end="50" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="48">@</span><span class="qname" start="49" select="quick">*</span><span class="parenthesis" start="50">)</span><span class="whitespace" start="51"> </span><span class="op" start="52">=</span><span class="whitespace" start="53"> </span><span class="numeric" start="54">1</span><span class="parenthesis" start="55">)</span><span class="whitespace" start="56">
                			</span><span class="op" start="60">or</span><span class="whitespace" start="62"> </span><span class="parenthesis" start="63" pair-end="95" select="quick">(</span><span class="axis" start="64">@</span><span class="qname" start="65" select="quick">id</span><span class="whitespace" start="67"> </span><span class="op" start="68">and</span><span class="whitespace" start="71"> </span><span class="axis" start="72">@</span><span class="qname" start="73" select="quick">name</span><span class="whitespace" start="77"> </span><span class="op" start="78">and</span><span class="whitespace" start="81"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="82" pair-end="90" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="88">@</span><span class="qname" start="89" select="quick">*</span><span class="parenthesis" start="90">)</span><span class="whitespace" start="91"> </span><span class="op" start="92">=</span><span class="whitespace" start="93"> </span><span class="numeric" start="94">2</span><span class="parenthesis" start="95">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w4388"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4396" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4400" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w4402"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w4406"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w4410"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w4421"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w4425"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">name</span><span class="op">'</span><span class="whitespace" start="18"> </span><span class="op" start="19">and</span><span class="whitespace" start="22"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="23" pair-end="29" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="28">.</span><span class="parenthesis" start="29">)</span><span class="whitespace" start="30"> </span><span class="op" start="31">!=</span><span class="whitespace" start="33"> </span><span class="op">'</span><span class="literal" start="34">id</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		  </span><span class="ww" id="w4457"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4459" class="sc">/&gt;</span></span><span class="txt">
		</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4463" class="ec">&gt;</span></span><span class="txt">
		</span><span class="ww" id="w4465"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
		  </span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
		</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4475" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4479" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx4483" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4487" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w4489"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4497" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4501" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4505" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4509" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4511"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4515"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4519"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4530"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w4534"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">id</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w4553"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4555" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4559" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w4561"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4571" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4575" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx4579" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4581"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4589" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4593" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4597" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4601" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4605" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4611"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4627"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting cross reference prefixes</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4633" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4635"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4639"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert prefixes before a cross reference.
Any element processed in this mode should generate the prefix appropriate
to cross references to that element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4645" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4649" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4653" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4655"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioentry</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:bibliomixed</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">priority</span><span class="atneq">=</span><span class="z">"</span><span class="av">100</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4679"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">[</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4685" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4689" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4691"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span id="wx4705" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4711"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4727"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting cross reference suffixes</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4733" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4735"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4739"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert suffixes after a cross reference.
Any element processed in this mode should generate the suffix appropriate
to cross references to that element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4745" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4749" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4753" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4755"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioentry</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:bibliomixed</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">priority</span><span class="atneq">=</span><span class="z">"</span><span class="av">100</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4779"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">]</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4785" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4789" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4791"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span id="wx4805" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4811"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4827"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting cross references</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4833" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4835"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4839"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert cross references.
Any element processed in this mode should generate the text of a
cross references to that element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4845" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4849" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4853" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4855"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4871"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx4879" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4881"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx4889" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4891"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx4905" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4907"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4917"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4921"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Don't know what gentext to create for xref to: "</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4927" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4929"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="z">"</span><span id="wx4940" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4942"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">", ("</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4948" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4950"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">xml:id</span><span class="z">"</span><span id="wx4959" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4961"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">")</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4967" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx4971" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4975" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4977"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4985" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4989" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4991"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5007"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5015" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5017"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5025" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> if you xref to a title, xref to the parent... </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w5031"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">*</span><span class="filter" start="10" pair-end="12" select="quick">[</span><span class="numeric" start="11">2</span><span class="filter" start="12">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5051"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5065" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5067"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5081" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5085" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5089" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5091"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:abstract</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:authorblurb</span><span class="op" start="27">|</span><span class="qname" start="28" select="quick">db:personblurb</span><span class="op" start="42">|</span><span class="qname" start="43" select="quick">db:bibliodiv</span><span class="whitespace" start="55">
                     		     </span><span class="op" start="63">|</span><span class="qname" start="64" select="quick">db:bibliomset</span><span class="op" start="77">|</span><span class="qname" start="78" select="quick">db:biblioset</span><span class="op" start="90">|</span><span class="qname" start="91" select="quick">db:blockquote</span><span class="op" start="104">|</span><span class="qname" start="105" select="quick">db:calloutlist</span><span class="whitespace" start="119">
                     		     </span><span class="op" start="127">|</span><span class="qname" start="128" select="quick">db:caution</span><span class="op" start="138">|</span><span class="qname" start="139" select="quick">db:colophon</span><span class="op" start="150">|</span><span class="qname" start="151" select="quick">db:constraintdef</span><span class="op" start="167">|</span><span class="qname" start="168" select="quick">db:formalpara</span><span class="whitespace" start="181">
                     		     </span><span class="op" start="189">|</span><span class="qname" start="190" select="quick">db:glossdiv</span><span class="op" start="201">|</span><span class="qname" start="202" select="quick">db:important</span><span class="op" start="214">|</span><span class="qname" start="215" select="quick">db:indexdiv</span><span class="op" start="226">|</span><span class="qname" start="227" select="quick">db:itemizedlist</span><span class="whitespace" start="242">
                     		     </span><span class="op" start="250">|</span><span class="qname" start="251" select="quick">db:legalnotice</span><span class="op" start="265">|</span><span class="qname" start="266" select="quick">db:lot</span><span class="op" start="272">|</span><span class="qname" start="273" select="quick">db:msg</span><span class="op" start="279">|</span><span class="qname" start="280" select="quick">db:msgexplan</span><span class="op" start="292">|</span><span class="qname" start="293" select="quick">db:msgmain</span><span class="whitespace" start="303">
                     		     </span><span class="op" start="311">|</span><span class="qname" start="312" select="quick">db:msgrel</span><span class="op" start="321">|</span><span class="qname" start="322" select="quick">db:msgset</span><span class="op" start="331">|</span><span class="qname" start="332" select="quick">db:msgsub</span><span class="op" start="341">|</span><span class="qname" start="342" select="quick">db:note</span><span class="op" start="349">|</span><span class="qname" start="350" select="quick">db:orderedlist</span><span class="whitespace" start="364">
                     		     </span><span class="op" start="372">|</span><span class="qname" start="373" select="quick">db:partintro</span><span class="op" start="385">|</span><span class="qname" start="386" select="quick">db:productionset</span><span class="op" start="402">|</span><span class="qname" start="403" select="quick">db:qandadiv</span><span class="whitespace" start="414">
                     		     </span><span class="op" start="422">|</span><span class="qname" start="423" select="quick">db:refsynopsisdiv</span><span class="op" start="440">|</span><span class="qname" start="441" select="quick">db:segmentedlist</span><span class="op" start="457">|</span><span class="qname" start="458" select="quick">db:set</span><span class="op" start="464">|</span><span class="qname" start="465" select="quick">db:setindex</span><span class="whitespace" start="476">
                     		     </span><span class="op" start="484">|</span><span class="qname" start="485" select="quick">db:sidebar</span><span class="op" start="495">|</span><span class="qname" start="496" select="quick">db:tip</span><span class="op" start="502">|</span><span class="qname" start="503" select="quick">db:toc</span><span class="op" start="509">|</span><span class="qname" start="510" select="quick">db:variablelist</span><span class="op" start="525">|</span><span class="qname" start="526" select="quick">db:warning</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5189"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5197" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5199"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5207" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5209"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx5223" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> catch-all for things with (possibly optional) titles </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w5229"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5245"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5261" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5263"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5277" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5279"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5293" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5295"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx5309" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5313" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5317" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5319"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:author</span><span class="op" start="10">|</span><span class="qname" start="11" select="quick">db:editor</span><span class="op" start="20">|</span><span class="qname" start="21" select="quick">db:othercredit</span><span class="op" start="35">|</span><span class="qname" start="36" select="quick">db:personname</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5341"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5349" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5351"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5359" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5361"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}person-name" class="solar"><span class="tcall">t:person-name</span></a><span class="z">"</span><span id="wx5369" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5373" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5375"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:authorgroup</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5391"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5399" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5401"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5409" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5411"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}person-name-list" class="solar"><span class="tcall">t:person-name-list</span></a><span class="z">"</span><span id="wx5419" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5423" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5425"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:figure</span><span class="op" start="10">|</span><span class="qname" start="11" select="quick">db:example</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:table</span><span class="op" start="30">|</span><span class="qname" start="31" select="quick">db:equation</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5447"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5455" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5457"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5465" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5467"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5483"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5499" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5501"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5515" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5517"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5531" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5535" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5539" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5541"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:procedure</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5557"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5565" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5567"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5575" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5577"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span id="wx5585" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5587"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5603"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5619" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5621"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5635" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5637"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5651" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5653"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx5667" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5671" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5675" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5677"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:cmdsynopsis</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5693"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="15" select="quick">(</span><span class="context" start="2">.</span><span class="step" start="3">//</span><span class="qname" start="5" select="quick">db:command</span><span class="parenthesis" start="15">)</span><span class="filter" start="16" pair-end="18" select="quick">[</span><span class="numeric" start="17">1</span><span class="filter" start="18">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span id="wx5714" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5718" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5720"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:funcsynopsis</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5736"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="16" select="quick">(</span><span class="context" start="2">.</span><span class="step" start="3">//</span><span class="qname" start="5" select="quick">db:function</span><span class="parenthesis" start="16">)</span><span class="filter" start="17" pair-end="19" select="quick">[</span><span class="numeric" start="18">1</span><span class="filter" start="19">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span id="wx5757" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5761" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5763"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:dedication</span><span class="op" start="14">|</span><span class="qname" start="15" select="quick">db:preface</span><span class="whitespace" start="25">
                     		     </span><span class="op" start="33">|</span><span class="qname" start="34" select="quick">db:chapter</span><span class="op" start="44">|</span><span class="qname" start="45" select="quick">db:appendix</span><span class="op" start="56">|</span><span class="qname" start="57" select="quick">db:article</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5788"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5796" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5798"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5806" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5808"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5824"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5840" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5842"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5856" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5858"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5872" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5876" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5880" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5882"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliography</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5898"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5906" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5908"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5916" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5918"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5934"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5950" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5952"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5966" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5968"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5982" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5986" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5990" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5992"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioentry</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:bibliomixed</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6010"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6018" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6020"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6028" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6030"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="63" select="quick">(</span><span class="axis" start="2">ancestor::</span><span class="qname" start="12" select="quick">db:bibliography</span><span class="whitespace" start="27">
                                     				       </span><span class="op" start="39">|</span><span class="axis" start="40">ancestor::</span><span class="qname" start="50" select="quick">db:bibliolist</span><span class="parenthesis" start="63">)</span><span class="filter" start="64" pair-end="71" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="65" pair-end="70" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="70">)</span><span class="filter" start="71">]</span><span class="z">"</span><span id="wx6056" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> handles both biblioentry and bibliomixed </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w6062"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6066"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/param.xsl.html#v?bibliography.numbered" class="solar"><span class="variable" start="1" select="quick">$bibliography.numbered</span></a><span class="whitespace" start="23"> </span><span class="op" start="24">!=</span><span class="whitespace" start="26"> </span><span class="numeric" start="27">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6080"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6084"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:bibliography</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w6097"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:bibliography</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:biblioentry|db:bibliomixed</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx6123" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6127" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w6129"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w6133"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:bibliolist</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:biblioentry|db:bibliomixed</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx6159" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6163" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6167" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6171" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6173"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="filter" start="2" pair-end="4" select="quick">[</span><span class="numeric" start="3">1</span><span class="filter" start="4">]</span><span class="step" start="5">/</span><span class="axis" start="6">self::</span><span class="qname" start="12" select="quick">db:abbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6189"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="filter" start="2" pair-end="4" select="quick">[</span><span class="numeric" start="3">1</span><span class="filter" start="4">]</span><span class="z">"</span><span id="wx6200" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6204" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6206"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6210"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">id</span><span class="z">"</span><span id="wx6219" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6223" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6227" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6231" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6233"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6249"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6257" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6259"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6267" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6269"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6285"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6301" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6303"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6317" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6319"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6333" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6337" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6341" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6343"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6359"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6363"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/param.xsl.html#v?glossentry.show.acronym" class="solar"><span class="variable" start="1" select="quick">$glossentry.show.acronym</span></a><span class="whitespace" start="25"> </span><span class="op" start="26">=</span><span class="whitespace" start="27"> </span><span class="op">'</span><span class="literal" start="28">primary</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6379"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w6383"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:acronym</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:abbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w6395"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="22" select="quick">(</span><span class="qname" start="2" select="quick">db:acronym</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:abbrev</span><span class="parenthesis" start="22">)</span><span class="filter" start="23" pair-end="25" select="quick">[</span><span class="numeric" start="24">1</span><span class="filter" start="25">]</span><span class="z">"</span><span id="wx6410" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6414" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w6416"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w6420"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossterm</span><span class="filter" start="13" pair-end="15" select="quick">[</span><span class="numeric" start="14">1</span><span class="filter" start="15">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span id="wx6437" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6441" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6445" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6449" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6451"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6455"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossterm</span><span class="filter" start="13" pair-end="15" select="quick">[</span><span class="numeric" start="14">1</span><span class="filter" start="15">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span id="wx6472" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6476" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6480" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6484" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6486"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossterm</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6502"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx6504" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6508" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6510"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:index</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6526"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6534" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6536"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6544" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6546"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6562"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6578" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6580"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6594" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6596"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6610" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6614" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6618" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6620"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:listitem</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6636"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6644" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6646"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6654" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6656"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx6670" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6672"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6688"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6704" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6706"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6720" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6722"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6736" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6738"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx6752" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6756" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6760" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6762"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:simplesect</span><span class="whitespace" start="25">
                                          </span><span class="op" start="47">|</span><span class="qname" start="48" select="quick">db:sect1</span><span class="op" start="56">|</span><span class="qname" start="57" select="quick">db:sect2</span><span class="op" start="65">|</span><span class="qname" start="66" select="quick">db:sect3</span><span class="op" start="74">|</span><span class="qname" start="75" select="quick">db:sect4</span><span class="op" start="83">|</span><span class="qname" start="84" select="quick">db:sect5</span><span class="whitespace" start="92">
                                          </span><span class="op" start="114">|</span><span class="qname" start="115" select="quick">db:refsect1</span><span class="op" start="126">|</span><span class="qname" start="127" select="quick">db:refsect2</span><span class="op" start="138">|</span><span class="qname" start="139" select="quick">db:refsect3</span><span class="op" start="150">|</span><span class="qname" start="151" select="quick">db:refsection</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6800"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6808" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6810"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6818" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6820"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6836"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6852" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6854"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6868" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6870"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6884" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6888" class="ec">&gt;</span></span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> FIXME: What about "in Chapter X"? </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6896" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6898"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bridgehead</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6914"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6922" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6924"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6932" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6934"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6950"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6966" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6968"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6982" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6984"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6998" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7002" class="ec">&gt;</span></span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> FIXME: What about "in Chapter X"? </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7010" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7012"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaset</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7028"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7036" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7038"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7046" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7048"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx7062" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7064"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7080"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7096" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7098"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7112" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7114"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7128" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7130"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx7144" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7148" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7152" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7154"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandadiv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7170"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7178" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7180"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7188" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7190"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx7204" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7206"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7222"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7238" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7240"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7254" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7256"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7270" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7272"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx7286" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7290" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7294" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7296"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7312"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7320" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7322"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7330" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7332"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:question</span><span class="filter" start="12" pair-end="14" select="quick">[</span><span class="numeric" start="13">1</span><span class="filter" start="14">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7351"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7367" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7369"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7383" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7385"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7399" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7403" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7407" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7409"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:question</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:answer</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7427"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7435" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7437"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7445" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7447"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7463"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7479" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7481"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7495" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7497"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7511" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7515" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7519" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7521"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:part</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:reference</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7539"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7547" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7549"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7557" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7559"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7575"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7591" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7593"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7607" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7609"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7623" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7627" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7631" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7633"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7649"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7657" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7659"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7667" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7669"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7673"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refmeta</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">db:refentrytitle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7685"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refmeta</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">db:refentrytitle</span><span class="z">"</span><span id="wx7695" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7699" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7701"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7705"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refnamediv</span><span class="step" start="14">/</span><span class="qname" start="15" select="quick">db:refname</span><span class="filter" start="25" pair-end="27" select="quick">[</span><span class="numeric" start="26">1</span><span class="filter" start="27">]</span><span class="z">"</span><span id="wx7718" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx7722" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx7726" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7728"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refmeta</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">db:manvolnum</span><span class="z">"</span><span id="wx7738" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7742" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7744"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refnamediv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7760"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7768" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7770"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7778" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7780"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refname</span><span class="filter" start="11" pair-end="13" select="quick">[</span><span class="numeric" start="12">1</span><span class="filter" start="13">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7799"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7813" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7815"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7829" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7833" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7837" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7839"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refname</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7855"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7863" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7865"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7873" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7875"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx7877" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7881" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7883"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:step</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7899"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7907" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7909"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7917" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7919"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7929"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">Step</span><span class="op">'</span><span class="z">"</span><span id="wx7945" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx7949" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7951"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt"> </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx7957" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7959"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:number</span><span class="z">"</span><span id="wx7973" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7977" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7979"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:varlistentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7995"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8003" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8005"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8013" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8015"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:term</span><span class="filter" start="8" pair-end="10" select="quick">[</span><span class="numeric" start="9">1</span><span class="filter" start="10">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8034"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx8048" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8050"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx8064" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx8068" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8072" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8074"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:varlistentry</span><span class="step" start="16">/</span><span class="qname" start="17" select="quick">db:term</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8092"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8100" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8102"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8110" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> to avoid the comma that will be generated if there are several terms </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w8116"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx8118" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8122" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8124"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:co</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8140"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8148" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8150"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8158" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8160"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:callout-bug</span><span class="z">"</span><span id="wx8174" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8178" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8180"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:areaset</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8196"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/callouts.xsl.html#t?{http://docbook.org/xslt/ns/template}callout-bug" class="solar"><span class="tcall">t:callout-bug</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8206"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">conum</span><span class="z">"</span><span class="z">
                		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="71" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">preceding-sibling::</span><span class="qname" start="26" select="quick">db:areaset</span><span class="whitespace" start="36">
                        			    </span><span class="op" start="44">|</span><span class="axis" start="45">preceding-sibling::</span><span class="qname" start="64" select="quick">db:area</span><span class="parenthesis" start="71">)</span><span class="whitespace" start="72">
                        			    </span><span class="op" start="80">+</span><span class="numeric" start="81">1</span><span class="z">"</span><span id="wx8231" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx8235" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8239" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8241"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:area</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8257"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/callouts.xsl.html#t?{http://docbook.org/xslt/ns/template}callout-bug" class="solar"><span class="tcall">t:callout-bug</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8267"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">conum</span><span class="z">"</span><span class="z">
                		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="149" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:areaset</span><span class="step" start="25">/</span><span class="axis" start="26">preceding-sibling::</span><span class="qname" start="45" select="quick">db:areaset</span><span class="whitespace" start="55">
                        			          </span><span class="op" start="69">|</span><span class="axis" start="70">parent::</span><span class="qname" start="78" select="quick">db:areaset</span><span class="step" start="88">/</span><span class="axis" start="89">preceding-sibling::</span><span class="qname" start="108" select="quick">db:area</span><span class="whitespace" start="115">
                        				  </span><span class="op" start="122">|</span><span class="axis" start="123">preceding-sibling::</span><span class="qname" start="142" select="quick">db:area</span><span class="parenthesis" start="149">)</span><span class="whitespace" start="150">
                        			    </span><span class="op" start="158">+</span><span class="numeric" start="159">1</span><span class="z">"</span><span id="wx8302" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx8306" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8310" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8312"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8328"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8336" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8338"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8346" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8348"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8364"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx8380" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8382"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx8396" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8398"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx8412" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx8416" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8420" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8422"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:para</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8438"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8446" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8448"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8456" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8458"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="1383" select="quick">(</span><span class="axis" start="2">ancestor::</span><span class="qname" start="12" select="quick">db:simplesect</span><span class="whitespace" start="25">
                                                                            </span><span class="op" start="65">|</span><span class="axis" start="66">ancestor::</span><span class="qname" start="76" select="quick">db:section</span><span class="whitespace" start="86">
                                                                            </span><span class="op" start="126">|</span><span class="axis" start="127">ancestor::</span><span class="qname" start="137" select="quick">db:sect1</span><span class="whitespace" start="145">
                                                                            </span><span class="op" start="185">|</span><span class="axis" start="186">ancestor::</span><span class="qname" start="196" select="quick">db:sect2</span><span class="whitespace" start="204">
                                                                            </span><span class="op" start="244">|</span><span class="axis" start="245">ancestor::</span><span class="qname" start="255" select="quick">db:sect3</span><span class="whitespace" start="263">
                                                                            </span><span class="op" start="303">|</span><span class="axis" start="304">ancestor::</span><span class="qname" start="314" select="quick">db:sect4</span><span class="whitespace" start="322">
                                                                            </span><span class="op" start="362">|</span><span class="axis" start="363">ancestor::</span><span class="qname" start="373" select="quick">db:sect5</span><span class="whitespace" start="381">
                                                                            </span><span class="op" start="421">|</span><span class="axis" start="422">ancestor::</span><span class="qname" start="432" select="quick">db:refsection</span><span class="whitespace" start="445">
                                                                            </span><span class="op" start="485">|</span><span class="axis" start="486">ancestor::</span><span class="qname" start="496" select="quick">db:refsect1</span><span class="whitespace" start="507">
                                                                            </span><span class="op" start="547">|</span><span class="axis" start="548">ancestor::</span><span class="qname" start="558" select="quick">db:refsect2</span><span class="whitespace" start="569">
                                                                            </span><span class="op" start="609">|</span><span class="axis" start="610">ancestor::</span><span class="qname" start="620" select="quick">db:refsect3</span><span class="whitespace" start="631">
                                                                            </span><span class="op" start="671">|</span><span class="axis" start="672">ancestor::</span><span class="qname" start="682" select="quick">db:chapter</span><span class="whitespace" start="692">
                                                                            </span><span class="op" start="732">|</span><span class="axis" start="733">ancestor::</span><span class="qname" start="743" select="quick">db:appendix</span><span class="whitespace" start="754">
                                                                            </span><span class="op" start="794">|</span><span class="axis" start="795">ancestor::</span><span class="qname" start="805" select="quick">db:preface</span><span class="whitespace" start="815">
                                                                            </span><span class="op" start="855">|</span><span class="axis" start="856">ancestor::</span><span class="qname" start="866" select="quick">db:partintro</span><span class="whitespace" start="878">
                                                                            </span><span class="op" start="918">|</span><span class="axis" start="919">ancestor::</span><span class="qname" start="929" select="quick">db:dedication</span><span class="whitespace" start="942">
                                                                            </span><span class="op" start="982">|</span><span class="axis" start="983">ancestor::</span><span class="qname" start="993" select="quick">db:colophon</span><span class="whitespace" start="1004">
                                                                            </span><span class="op" start="1044">|</span><span class="axis" start="1045">ancestor::</span><span class="qname" start="1055" select="quick">db:bibliography</span><span class="whitespace" start="1070">
                                                                            </span><span class="op" start="1110">|</span><span class="axis" start="1111">ancestor::</span><span class="qname" start="1121" select="quick">db:index</span><span class="whitespace" start="1129">
                                                                            </span><span class="op" start="1169">|</span><span class="axis" start="1170">ancestor::</span><span class="qname" start="1180" select="quick">db:glossary</span><span class="whitespace" start="1191">
                                                                            </span><span class="op" start="1231">|</span><span class="axis" start="1232">ancestor::</span><span class="qname" start="1242" select="quick">db:glossentry</span><span class="whitespace" start="1255">
                                                                            </span><span class="op" start="1295">|</span><span class="axis" start="1296">ancestor::</span><span class="qname" start="1306" select="quick">db:listitem</span><span class="whitespace" start="1317">
                                                                            </span><span class="op" start="1357">|</span><span class="axis" start="1358">ancestor::</span><span class="qname" start="1368" select="quick">db:varlistentry</span><span class="parenthesis" start="1383">)</span><span class="filter" start="1384" pair-end="1391" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="1385" pair-end="1390" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="1390">)</span><span class="filter" start="1391">]</span><span class="z">"</span><span id="wx8568" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8570"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span id="wx8584" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8588" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w8594"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8610"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting markup in an xref</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx8616" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8618"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8622"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is (sometimes) used when generating cross references.
Any element processed
in this mode should generate markup appropriate to appear in a
cross-reference.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8628" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx8632" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx8636" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8638"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">title</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8654"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx8656" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8660" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8662"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">command</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8678"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/inlines.xsl.html#t?{http://docbook.org/xslt/ns/template}inline-boldseq" class="solar"><span class="tcall">t:inline-boldseq</span></a><span class="z">"</span><span id="wx8686" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8690" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8692"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">function</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8708"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/inlines.xsl.html#t?{http://docbook.org/xslt/ns/template}inline-monoseq" class="solar"><span class="tcall">t:inline-monoseq</span></a><span class="z">"</span><span id="wx8716" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8720" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx8724" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>