<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xref.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:h</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns:t</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:u</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/unittests#</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:xlink</span><span class="atneq">=</span><span class="z">'</span><span class="av">http://www.w3.org/1999/xlink</span><span class="z">'</span><span class="z">
                                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                		</span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fn h m t u xlink xs</span><span class="z">"</span><span class="z">
                                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="ww" id="w93"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?use.role.as.xrefstyle">use.role.as.xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">0</span><span class="z">"</span><span id="wx107" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w113"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:anchor</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w123"><span class="es">&lt;</span><span class="en">span</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w127"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx135" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx139" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx143" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w149"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:link</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w165"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Template for processing link elements</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx171" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w173"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w177"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template matches </span><span class="ww" id="w181"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">link</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx187" class="ec">&gt;</span></span><span class="txt"> elements. There are four
possibilities to consider: the link may have content or it may be
empty and the link may have an </span><span class="ww" id="w189"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xlink:href</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx201" class="ec">&gt;</span></span><span class="txt">
attribute or a </span><span class="ww" id="w203"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">linkend</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx215" class="ec">&gt;</span></span><span class="txt"> attribute:</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx219" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w221"><span class="es">&lt;</span><span class="en">informaltable</span><span class="z"> </span><span class="atn">rowheader</span><span class="atneq">=</span><span class="z">"</span><span class="av">firstcol</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w231"><span class="es">&lt;</span><span class="en">tgroup</span><span class="z"> </span><span class="atn">cols</span><span class="atneq">=</span><span class="z">"</span><span class="av">3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w241"><span class="es">&lt;</span><span class="en">thead</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w245"><span class="es">&lt;</span><span class="en">row</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w249"><span class="es">&lt;</span><span class="en">entry</span><span id="wx251" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ww" id="w253"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Has Content</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx259" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w261"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Is Empty</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx267" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">row</span><span id="wx271" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">thead</span><span id="wx275" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w277"><span class="es">&lt;</span><span class="en">tbody</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w281"><span class="es">&lt;</span><span class="en">row</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w285"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Has </span><span class="ww" id="w289"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xlink:href</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx301" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx305" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w307"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Content is a link to the specified URI.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx313" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w315"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">The specified URI is used as the content. It is a link to the
specified URI.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx321" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">row</span><span id="wx325" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w327"><span class="es">&lt;</span><span class="en">row</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w331"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Has </span><span class="ww" id="w335"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">linkend</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx347" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx351" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w353"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Content is a link to the element identified.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx359" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w361"><span class="es">&lt;</span><span class="en">entry</span><span class="scx">&gt;</span><span class="txt">Semantically equivalent to an </span><span class="ww" id="w365"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">xref</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx371" class="ec">&gt;</span></span><span class="txt"> to the element
identified.</span><span class="ez">&lt;/</span><span class="cl">entry</span><span id="wx375" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">row</span><span id="wx379" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">tbody</span><span id="wx383" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">tgroup</span><span id="wx387" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">informaltable</span><span id="wx391" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx395" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx399" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w401"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:link</span><span class="z">"</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/ns/docbook}link">db:link</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w417"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="17" select="quick">string</span></a><span class="parenthesis">(</span><span class="qname" start="8" select="quick">db:alt</span><span class="filter" start="14" pair-end="16" select="quick">[</span><span class="numeric" start="15">1</span><span class="filter" start="16">]</span><span class="parenthesis" start="17">)</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx443" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w445"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?href">href</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-iri-to-uri" class="solar"><span class="function" start="1" pair-end="31" select="quick">iri-to-uri</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="12" pair-end="30" select="quick">string</span></a><span class="parenthesis">(</span><span class="axis" start="19">@</span><span class="qname" start="20" select="quick">xlink:href</span><span class="parenthesis" start="30">)</span><span class="parenthesis" start="31">)</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx472" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w474"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w478"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w490"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w494"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w510"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$href</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w522"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx530" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w532"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w548"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx562" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx566" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w568"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx570" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx574" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx578" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w580"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w584"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="25" select="quick">not</span></a><span class="parenthesis">(</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="5" pair-end="24" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="axis" start="14">@</span><span class="qname" start="15" select="quick">linkend</span><span class="op" start="22">,</span><span class="context" start="23">.</span><span class="parenthesis" start="24">)</span><span class="parenthesis" start="25">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w603"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w607"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Attempt to link to undefined ID: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx613" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w615"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">linkend</span><span class="z">"</span><span id="wx624" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx628" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx632" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w634"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">brokenlink</span><span class="z">"</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="av">#</span><span class="op">{</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">linkend</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w654"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx662" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w664"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w680"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx694" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx698" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w700"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx702" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx706" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx710" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx714" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx718" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w720"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w724"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w728"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w744"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$href</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w756"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx764" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w766"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="z">"</span><span id="wx774" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx778" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx782" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w784"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w788"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/xref.xsl.html#t?{http://docbook.org/ns/docbook}xref" class="solar"><span class="tcall">db:xref</span></a><span class="z">"</span><span id="wx796" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx800" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx804" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx808" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx812" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx816" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w822"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:xref</span><span class="z">"</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:xref</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w844"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Template for processing xref elements</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx850" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w852"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w856"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template matches </span><span class="ww" id="w860"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">xref</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx866" class="ec">&gt;</span></span><span class="txt"> elements. There are two
possibilities to consider: the </span><span class="ww" id="w868"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">xref</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx874" class="ec">&gt;</span></span><span class="txt"> may have an
</span><span class="ww" id="w876"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xlink:href</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx888" class="ec">&gt;</span></span><span class="txt">
attribute or a </span><span class="ww" id="w890"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">linkend</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx902" class="ec">&gt;</span></span><span class="txt"> attribute</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx906" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w908"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">For the moment, I don't know what to do about the href case.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx914" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx918" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx922" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w924"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:xref</span><span class="z">"</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/ns/docbook}xref">db:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w940"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?linkend">linkend</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">linkend</span><span class="z">"</span><span id="wx955" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w957"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target">target</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="1" pair-end="20" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$linkend</span><span class="op" start="18">,</span><span class="context" start="19">.</span><span class="parenthesis" start="20">)</span><span class="filter" start="21" pair-end="23" select="quick">[</span><span class="numeric" start="22">1</span><span class="filter" start="23">]</span><span class="z">"</span><span id="wx979" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w981"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refelem">refelem</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="18" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$target</span><span class="parenthesis" start="18">)</span><span class="z">"</span><span id="wx998" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1000"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="7" pair-end="26" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$linkend</span><span class="op" start="24">,</span><span class="context" start="25">.</span><span class="parenthesis" start="26">)</span><span class="parenthesis" start="27">)</span><span class="whitespace" start="28"> </span><span class="qname" start="29" select="quick">&amp;</span><span class="op" start="30">gt</span><span class="qname" start="32" select="quick">;</span><span class="whitespace" start="33"> </span><span class="numeric" start="34">1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1024"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1028"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: the ID '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1034" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1036"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$linkend</span><span class="z">"</span><span id="wx1044" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1046"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">' is not unique.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1052" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1056" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1060" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1062"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1066"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="14" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$target</span><span class="parenthesis" start="14">)</span><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><span class="numeric" start="18">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1083"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1087"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">XRef to nonexistent id: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1093" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w1095"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$linkend</span><span class="z">"</span><span id="wx1103" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1107" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1109"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">formatting-error</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1119"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx1127" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1129"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1135" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx1139" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1143" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w1145"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">endterm</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1156"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?etarget">etarget</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="1" pair-end="20" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="axis" start="10">@</span><span class="qname" start="11" select="quick">endterm</span><span class="op" start="18">,</span><span class="context" start="19">.</span><span class="parenthesis" start="20">)</span><span class="filter" start="21" pair-end="23" select="quick">[</span><span class="numeric" start="22">1</span><span class="filter" start="23">]</span><span class="z">"</span><span id="wx1179" class="sc">/&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1181"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}findid" class="solar"><span class="function" start="7" pair-end="26" select="quick">f:findid</span></a><span class="parenthesis">(</span><span class="axis" start="16">@</span><span class="qname" start="17" select="quick">endterm</span><span class="op" start="24">,</span><span class="context" start="25">.</span><span class="parenthesis" start="26">)</span><span class="parenthesis" start="27">)</span><span class="whitespace" start="28"> </span><span class="qname" start="29" select="quick">&amp;</span><span class="op" start="30">gt</span><span class="qname" start="32" select="quick">;</span><span class="whitespace" start="33"> </span><span class="numeric" start="34">1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1206"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1210"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: the ID '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1216" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1218"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">endterm</span><span class="z">"</span><span id="wx1227" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1229"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">' is not unique.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1235" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1239" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1243" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1245"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1249"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="15" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$etarget</span><span class="parenthesis" start="15">)</span><span class="whitespace" start="16"> </span><span class="op" start="17">=</span><span class="whitespace" start="18"> </span><span class="numeric" start="19">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w1266"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1270"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Endterm points to nonexistent id: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1276" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1278"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">endterm</span><span class="z">"</span><span id="wx1287" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1291" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1293"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1310"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx1318" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1320"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">formatting-error</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w1330"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1336" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx1340" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1344" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1348" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w1350"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1354"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1371"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}id" class="solar"><span class="tcall">t:id</span></a><span class="z">"</span><span id="wx1379" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1381"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$etarget</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:endterm</span><span class="z">"</span><span id="wx1395" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1399" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1403" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1407" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1411" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w1413"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="step" start="8">/</span><span class="axis" start="9">@</span><span class="qname" start="10" select="quick">xreflabel</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1426"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1443"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/xref.xsl.html#t?xreflabel" class="solar"><span class="tcall">xreflabel</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1453"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span id="wx1467" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1471" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1475" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1479" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w1481"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1485"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span id="wx1499" class="sc">/&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1501"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="17" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$target</span><span class="parenthesis" start="17">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1518"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="step" start="8">/</span><span class="qname" start="9" select="quick">db:info</span><span class="step" start="16">/</span><span class="qname" start="17" select="quick">db:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1532"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="32" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$target</span><span class="step" start="15">/</span><span class="qname" start="16" select="quick">db:info</span><span class="step" start="23">/</span><span class="qname" start="24" select="quick">db:title</span><span class="parenthesis" start="32">)</span><span class="z">"</span><span id="wx1553" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1557" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1559"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1575"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1589" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1591"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1601"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w1605"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">role</span><span class="whitespace" start="6"> </span><span class="op" start="7">and</span><span class="whitespace" start="10"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="11" pair-end="25" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="15">@</span><span class="qname" start="16" select="quick">xrefstyle</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                </span><span class="qname" start="27" select="quick">	</span><span class="qname" start="28" select="quick">	</span><span class="qname" start="29" select="quick">	</span><span class="whitespace" start="30">      </span><span class="op" start="36">and</span><span class="whitespace" start="39"> </span><a href="xslt/base/html/xref.xsl.html#v?use.role.as.xrefstyle" class="solar"><span class="variable" start="40" select="quick">$use.role.as.xrefstyle</span></a><span class="whitespace" start="62"> </span><span class="op" start="63">!=</span><span class="whitespace" start="65"> </span><span class="numeric" start="66">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w1636"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">role</span><span class="z">"</span><span id="wx1645" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1649" class="ec">&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w1651"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w1655"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">xrefstyle</span><span class="z">"</span><span id="wx1664" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1668" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1672" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:with-param</span><span id="wx1676" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1680" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx1684" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1686"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span id="wx1700" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1704" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1708" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1712" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1714"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> FIXME: handle the things that are special about biblioref! </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w1728"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/xref.xsl.html#t?{http://docbook.org/ns/docbook}xref" class="solar"><span class="tcall">db:xref</span></a><span class="z">"</span><span id="wx1736" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1740" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1746"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xreflabel</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1762"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Template for processing xreflabels</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1768" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1770"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1774"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template is used to insert the markup associated with an
</span><span class="ww" id="w1778"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">'</span><span class="av">attribute</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">xreflabel</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx1790" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1794" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx1798" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1800"><span class="es">&lt;</span><span class="en">u:unittests</span><span class="z"> </span><span class="atn">template</span><span class="atneq">=</span><span class="z">"</span><span class="av">xreflabel</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1810"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1814"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1830"><span class="es">&lt;</span><span class="en">para</span><span class="z"> </span><span class="atn">xreflabel</span><span class="atneq">=</span><span class="z">"</span><span class="av">LabelMe</span><span class="z">"</span><span id="wx1838" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx1842" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1844"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'LabelMe'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx1850" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx1854" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w1856"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1860"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1876"><span class="es">&lt;</span><span class="en">para</span><span class="z"> </span><span class="atn">role</span><span class="atneq">=</span><span class="z">"</span><span class="av">I-Have-No-XRefLabel</span><span class="z">"</span><span id="wx1884" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx1888" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1890"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">''</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx1896" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx1900" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">u:unittests</span><span id="wx1904" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx1908" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1910"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?xreflabel">xreflabel</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> called to process an xreflabel...you might use this to make  </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> xreflabels come out in the right font for different targets, </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> for example. </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w1938"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target">target</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1952" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w1954"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target</span><span class="step" start="8">/</span><span class="axis" start="9">@</span><span class="qname" start="10" select="quick">xreflabel</span><span class="z">"</span><span id="wx1965" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1969" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1975"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:olink</span><span class="z">"</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}olink">t:olink</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1991"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?localinfo">localinfo</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">localinfo</span><span class="z">"</span><span id="wx2006" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> olinks resolved by stylesheet and target database </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w2012"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?targetdoc.att">targetdoc.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">targetdoc</span><span class="z">"</span><span id="wx2027" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2029"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?targetptr.att">targetptr.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">targetptr</span><span class="z">"</span><span id="wx2044" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2046"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.lang">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/l10n.xsl.html#f?{http://docbook.org/xslt/ns/extension}l10n-language" class="solar"><span class="function" start="1" pair-end="25" select="quick">f:l10n-language</span></a><span class="parenthesis">(</span><span class="context" start="17">.</span><span class="op" start="18">,</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="19" pair-end="24" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="24">)</span><span class="parenthesis" start="25">)</span><span class="z">"</span><span id="wx2067" class="sc">/&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2069"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target.database.filename">target.database.filename</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2079"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}select-target-database" class="solar"><span class="tcall">t:select-target-database</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2089"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetdoc.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetdoc.att</span><span class="z">"</span><span id="wx2103" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2105"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetptr.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetptr.att</span><span class="z">"</span><span id="wx2119" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2121"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2135" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2139" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2143" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2145"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target.database">target.database</span><span class="z">"</span><span class="z"> 
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="37" select="quick">document</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$target.database.filename</span><span class="op" start="35">,</span><span class="step" start="36">/</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span id="wx2164" class="sc">/&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2166"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#v?olink.debug" class="solar"><span class="variable" start="1" select="quick">$olink.debug</span></a><span class="whitespace" start="13"> </span><span class="op" start="14">!=</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2180"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2184"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Olink debug: root element of target.database '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2190" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2192"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database.filename</span><span class="z">"</span><span id="wx2200" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2202"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">' is '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2208" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2210"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="33" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$target.database</span><span class="step" start="28">/</span><span class="qname" start="29" select="quick">*</span><span class="filter" start="30" pair-end="32" select="quick">[</span><span class="numeric" start="31">1</span><span class="filter" start="32">]</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span id="wx2226" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2228"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">'.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2234" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx2238" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2242" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2244"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.key">olink.key</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2254"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}select-olink-key" class="solar"><span class="tcall">t:select-olink-key</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2264"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetdoc.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetdoc.att</span><span class="z">"</span><span id="wx2278" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2280"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">targetptr.att</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetptr.att</span><span class="z">"</span><span id="wx2294" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2296"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2310" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2312"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2326" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2330" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2334" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ww" id="w2336"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string-length" class="solar"><span class="function" start="1" pair-end="25" select="quick">string-length</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$olink.key</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26"> </span><span class="op" start="27">=</span><span class="whitespace" start="28"> </span><span class="numeric" start="29">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2353"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2357"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Error: unresolved olink: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2363" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2365"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">targetdoc/targetptr = '</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2371" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2373"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetdoc.att</span><span class="z">"</span><span id="wx2381" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2383"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">/</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2389" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2391"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$targetptr.att</span><span class="z">"</span><span id="wx2399" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2401"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">'.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx2407" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx2411" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2415" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2417"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?href">href</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2427"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}make-olink-href" class="solar"><span class="tcall">t:make-olink-href</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2437"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2451" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2453"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2467" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2471" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2475" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2477"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hottext">hottext</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2487"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}olink-hottext" class="solar"><span class="tcall">t:olink-hottext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2497"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2511" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2513"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2527" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2529"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2543" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2547" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2551" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2553"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.docname.citation">olink.docname.citation</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2563"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}olink-document-citation" class="solar"><span class="tcall">t:olink-document-citation</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2573"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2587" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2589"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2603" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2605"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2619" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2623" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2627" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2629"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?olink.page.citation">olink.page.citation</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2639"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/olink.xsl.html#t?{http://docbook.org/xslt/ns/template}olink-page-citation" class="solar"><span class="tcall">t:olink-page-citation</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2649"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.key</span><span class="z">"</span><span id="wx2663" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2665"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">target.database</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$target.database</span><span class="z">"</span><span id="wx2679" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2681"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink.lang</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.lang</span><span class="z">"</span><span id="wx2695" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2699" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2703" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2705"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2709"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$href</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2725"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$href</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w2743"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$hottext</span><span class="z">"</span><span id="wx2751" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx2755" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2757"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.page.citation</span><span class="z">"</span><span id="wx2765" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2767"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.docname.citation</span><span class="z">"</span><span id="wx2775" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2779" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2781"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2785"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">olink</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2795"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$hottext</span><span class="z">"</span><span id="wx2803" class="sc">/&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx2807" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2809"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.page.citation</span><span class="z">"</span><span id="wx2817" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2819"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$olink.docname.citation</span><span class="z">"</span><span id="wx2827" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2831" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2835" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2839" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2841"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">pagenumber.markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> no-op in HTML </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2863" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2865"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}olink-outline">t:olink-outline</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2875"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?outline.base.uri">outline.base.uri</span><span class="z">"</span><span id="wx2883" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2885"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?localinfo">localinfo</span><span class="z">"</span><span id="wx2893" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2895"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?return">return</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">href</span><span class="z">"</span><span id="wx2909" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2911"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?outline-file">outline-file</span><span class="z">"</span><span class="z">
                              </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="76" select="quick">concat</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$outline.base.uri</span><span class="op" start="25">,</span><span class="whitespace" start="26">
                                                     </span><a href="xslt/base/common/olink.xsl.html#v?olink.outline.ext" class="solar"><span class="variable" start="58" select="quick">$olink.outline.ext</span></a><span class="parenthesis" start="76">)</span><span class="z">"</span><span id="wx2931" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2933"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?outline">outline</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="25" select="quick">document</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$outline-file</span><span class="op" start="23">,</span><span class="context" start="24">.</span><span class="parenthesis" start="25">)</span><span class="step" start="26">/</span><span class="qname" start="27" select="quick">div</span><span class="z">"</span><span id="wx2954" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2956"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node-href">node-href</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2966"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2970"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$localinfo</span><span class="whitespace" start="11"> </span><span class="op" start="12">!=</span><span class="whitespace" start="14"> </span><span class="op">'</span><span class="literal" start="15"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2986"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">//</span><span class="qname" start="11" select="quick">*</span><span class="filter" start="12" pair-end="27" select="quick">[</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">id</span><span class="op" start="16">=</span><span class="variable" start="17" select="quick">$localinfo</span><span class="filter" start="27">]</span><span class="z">"</span><span id="wx3008" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3010"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">href</span><span class="z">"</span><span id="wx3021" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3025" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3027"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3031"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">/</span><span class="axis" start="10">@</span><span class="qname" start="11" select="quick">href</span><span class="z">"</span><span id="wx3042" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3046" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3050" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3054" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3056"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node-xref">node-xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3066"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3070"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$localinfo</span><span class="whitespace" start="11"> </span><span class="op" start="12">!=</span><span class="whitespace" start="14"> </span><span class="op">'</span><span class="literal" start="15"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3086"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">//</span><span class="qname" start="11" select="quick">*</span><span class="filter" start="12" pair-end="27" select="quick">[</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">id</span><span class="op" start="16">=</span><span class="variable" start="17" select="quick">$localinfo</span><span class="filter" start="27">]</span><span class="z">"</span><span id="wx3108" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3110"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="qname" start="7" select="quick">xref</span><span class="z">"</span><span id="wx3120" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3124" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3126"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3130"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$outline</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">xref</span><span class="z">"</span><span id="wx3140" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3144" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3148" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3152" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3154"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3158"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$return</span><span class="whitespace" start="8"> </span><span class="op" start="9">=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11">href</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3174"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-href</span><span class="z">"</span><span id="wx3182" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3186" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3188"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$return</span><span class="whitespace" start="8"> </span><span class="op" start="9">=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11">xref</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3204"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-xref</span><span class="z">"</span><span id="wx3212" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3216" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3218"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3222"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-xref</span><span class="z">"</span><span id="wx3230" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3234" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3238" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3242" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3248"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-title-markup</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3264"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting title markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3270" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3272"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3276"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert title markup. Any element processed
in this mode should generate its title.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3282" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3286" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3290" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3292"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3308"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3316" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3318"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3326" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3328"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span id="wx3336" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3338"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3342"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$purpose</span><span class="whitespace" start="9"> </span><span class="op" start="10">=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">xref</span><span class="op">'</span><span class="whitespace" start="18"> </span><span class="op" start="19">and</span><span class="whitespace" start="22"> </span><span class="qname" start="23" select="quick">db:info</span><span class="step" start="30">/</span><span class="qname" start="31" select="quick">db:titleabbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3364"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx3378" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3382" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3384"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3388"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx3396" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3400" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3404" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3408" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3410"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:chapter</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:appendix</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3428"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3436" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3438"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3446" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3448"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span id="wx3456" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3458"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3462"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$purpose</span><span class="whitespace" start="9"> </span><span class="op" start="10">=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">xref</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3478"><span class="es">&lt;</span><span class="en">i</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3482"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx3490" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">i</span><span id="wx3494" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3498" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3500"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3504"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx3512" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3516" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3520" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3524" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3530"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-subtitle-markup</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3546"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting subtitle markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3552" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3554"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3558"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert subtitle markup. Any element processed
in this mode should generate its subtitle.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3564" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3568" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3572" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3574"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3590"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3598" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3600"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3608" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3610"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?subtitle">subtitle</span><span class="z">"</span><span id="wx3618" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3620"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$subtitle</span><span class="z">"</span><span id="wx3628" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3632" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3638"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-label-markup</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3654"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting label markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3660" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3662"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3666"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert label markup. Any element processed
in this mode should generate its label (number).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3672" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3676" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3680" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3682"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-label-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3698"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3706" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3708"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3716" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3718"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span id="wx3726" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3728"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span id="wx3736" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3740" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3746"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-pagenumber-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3762"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting page number markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3768" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3770"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3774"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert page number markup. Any element processed
in this mode should generate its page number.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3780" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3784" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3788" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3790"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-pagenumber-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3806"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3814" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3816"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3824" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3826"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pagenumber">pagenumber</span><span class="z">"</span><span id="wx3834" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3836"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pagenumber</span><span class="z">"</span><span id="wx3844" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3848" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3854"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-direction-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3870"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting direction markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3876" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3878"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3882"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert direction. Any element processed
in this mode should generate its direction number. The direction is
calculated from a reference and a referent (above or below, for example).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3888" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3892" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx3896" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3898"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-direction-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3914"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx3922" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3924"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx3932" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3934"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?direction">direction</span><span class="z">"</span><span id="wx3942" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3944"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$direction</span><span class="z">"</span><span id="wx3952" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3956" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3962"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-olink-docname-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3978"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting </span><span class="ww" id="w3982"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">olink</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3988" class="ec">&gt;</span></span><span class="txt"> document name markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3992" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3994"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3998"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert </span><span class="ww" id="w4002"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">olink</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4008" class="ec">&gt;</span></span><span class="txt"> document name markup.
Any element processed in this mode should generate its document name.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4012" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4016" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4020" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4022"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:insert-olink-docname-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4038"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?purpose">purpose</span><span class="z">"</span><span id="wx4046" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4048"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx4056" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4058"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?docname">docname</span><span class="z">"</span><span id="wx4066" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4068"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">olinkdocname</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4078"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$docname</span><span class="z">"</span><span id="wx4086" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx4090" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4094" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4100"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:endterm</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4116"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for processing endterms</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4122" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4124"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4128"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert the markup associated with an
</span><span class="ww" id="w4132"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">'</span><span class="av">attribute</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">endterm</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4144" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4148" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4152" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4156" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4158"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:endterm</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> Process the children of the endterm element </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w4178"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?endterm">endterm</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4188"><span class="es">&lt;</span><span class="en">span</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4192"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">child::</span><span class="node" start="8" pair-end="13" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx4203" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx4207" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4211" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4213"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$endterm</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4229" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4233" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4239"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4255"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for removing IDs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4261" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4263"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4267"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode processes result (XHTML) markup, removing all ID
attributes.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4273" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4277" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4281" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4283"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4299"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4303"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="12" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="11">.</span><span class="parenthesis" start="12">)</span><span class="whitespace" start="13"> </span><span class="op" start="14">=</span><span class="whitespace" start="15"> </span><span class="qname" start="16" select="quick">h:a</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4320"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4324"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="25" select="quick">(</span><span class="axis" start="2">@</span><span class="qname" start="3" select="quick">name</span><span class="whitespace" start="7"> </span><span class="op" start="8">and</span><span class="whitespace" start="11"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="12" pair-end="20" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="18">@</span><span class="qname" start="19" select="quick">*</span><span class="parenthesis" start="20">)</span><span class="whitespace" start="21"> </span><span class="op" start="22">=</span><span class="whitespace" start="23"> </span><span class="numeric" start="24">1</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                </span><span class="qname" start="27" select="quick">	</span><span class="qname" start="28" select="quick">	</span><span class="qname" start="29" select="quick">	</span><span class="op" start="30">or</span><span class="whitespace" start="32"> </span><span class="parenthesis" start="33" pair-end="55" select="quick">(</span><span class="axis" start="34">@</span><span class="qname" start="35" select="quick">id</span><span class="whitespace" start="37"> </span><span class="op" start="38">and</span><span class="whitespace" start="41"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="42" pair-end="50" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="48">@</span><span class="qname" start="49" select="quick">*</span><span class="parenthesis" start="50">)</span><span class="whitespace" start="51"> </span><span class="op" start="52">=</span><span class="whitespace" start="53"> </span><span class="numeric" start="54">1</span><span class="parenthesis" start="55">)</span><span class="whitespace" start="56">
                </span><span class="qname" start="57" select="quick">	</span><span class="qname" start="58" select="quick">	</span><span class="qname" start="59" select="quick">	</span><span class="op" start="60">or</span><span class="whitespace" start="62"> </span><span class="parenthesis" start="63" pair-end="95" select="quick">(</span><span class="axis" start="64">@</span><span class="qname" start="65" select="quick">id</span><span class="whitespace" start="67"> </span><span class="op" start="68">and</span><span class="whitespace" start="71"> </span><span class="axis" start="72">@</span><span class="qname" start="73" select="quick">name</span><span class="whitespace" start="77"> </span><span class="op" start="78">and</span><span class="whitespace" start="81"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="82" pair-end="90" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="88">@</span><span class="qname" start="89" select="quick">*</span><span class="parenthesis" start="90">)</span><span class="whitespace" start="91"> </span><span class="op" start="92">=</span><span class="whitespace" start="93"> </span><span class="numeric" start="94">2</span><span class="parenthesis" start="95">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w4398"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4406" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4410" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w4412"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w4416"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w4420"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w4431"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w4435"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">name</span><span class="op">'</span><span class="whitespace" start="18"> </span><span class="op" start="19">and</span><span class="whitespace" start="22"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="23" pair-end="29" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="28">.</span><span class="parenthesis" start="29">)</span><span class="whitespace" start="30"> </span><span class="op" start="31">!=</span><span class="whitespace" start="33"> </span><span class="op">'</span><span class="literal" start="34">id</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		  </span><span class="ww" id="w4467"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4469" class="sc">/&gt;</span></span><span class="txt">
		</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4473" class="ec">&gt;</span></span><span class="txt">
		</span><span class="ww" id="w4475"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
		  </span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
		</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4485" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4489" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx4493" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4497" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w4499"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4507" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4511" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4515" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4519" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4521"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4525"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4529"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4540"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w4544"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">id</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w4563"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4565" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4569" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w4571"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4581" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4585" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx4589" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4591"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remove-ids</span><span class="z">"</span><span id="wx4599" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4603" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4607" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4611" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4615" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4621"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4637"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting cross reference prefixes</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4643" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4645"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4649"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert prefixes before a cross reference.
Any element processed in this mode should generate the prefix appropriate
to cross references to that element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4655" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4659" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4663" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4665"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioentry</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:bibliomixed</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">priority</span><span class="atneq">=</span><span class="z">"</span><span class="av">100</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4689"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">[</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4695" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4699" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4701"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-prefix</span><span class="z">"</span><span id="wx4715" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4721"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4737"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting cross reference suffixes</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4743" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4745"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4749"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert suffixes after a cross reference.
Any element processed in this mode should generate the suffix appropriate
to cross references to that element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4755" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4759" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4763" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4765"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioentry</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:bibliomixed</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">priority</span><span class="atneq">=</span><span class="z">"</span><span class="av">100</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4789"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">]</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4795" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4799" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4801"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to-suffix</span><span class="z">"</span><span id="wx4815" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ==================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4821"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4837"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting cross references</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4843" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4845"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4849"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to insert cross references.
Any element processed in this mode should generate the text of a
cross references to that element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4855" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4859" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4863" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4865"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4881"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx4889" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4891"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx4899" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4901"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx4915" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4917"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4927"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4931"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Don't know what gentext to create for xref to: "</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4937" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4939"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="z">"</span><span id="wx4950" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4952"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">", ("</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4958" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4960"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">xml:id</span><span class="z">"</span><span id="wx4969" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4971"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">")</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx4977" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx4981" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4985" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4987"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4995" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4999" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5001"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5017"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5025" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5027"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5035" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> if you xref to a title, xref to the parent... </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w5041"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">*</span><span class="filter" start="10" pair-end="12" select="quick">[</span><span class="numeric" start="11">2</span><span class="filter" start="12">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5061"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5075" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5077"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5091" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5095" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5099" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5101"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:abstract</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:authorblurb</span><span class="op" start="27">|</span><span class="qname" start="28" select="quick">db:personblurb</span><span class="op" start="42">|</span><span class="qname" start="43" select="quick">db:bibliodiv</span><span class="whitespace" start="55">
                     </span><span class="qname" start="56" select="quick">	</span><span class="qname" start="57" select="quick">	</span><span class="whitespace" start="58">     </span><span class="op" start="63">|</span><span class="qname" start="64" select="quick">db:bibliomset</span><span class="op" start="77">|</span><span class="qname" start="78" select="quick">db:biblioset</span><span class="op" start="90">|</span><span class="qname" start="91" select="quick">db:blockquote</span><span class="op" start="104">|</span><span class="qname" start="105" select="quick">db:calloutlist</span><span class="whitespace" start="119">
                     </span><span class="qname" start="120" select="quick">	</span><span class="qname" start="121" select="quick">	</span><span class="whitespace" start="122">     </span><span class="op" start="127">|</span><span class="qname" start="128" select="quick">db:caution</span><span class="op" start="138">|</span><span class="qname" start="139" select="quick">db:colophon</span><span class="op" start="150">|</span><span class="qname" start="151" select="quick">db:constraintdef</span><span class="op" start="167">|</span><span class="qname" start="168" select="quick">db:formalpara</span><span class="whitespace" start="181">
                     </span><span class="qname" start="182" select="quick">	</span><span class="qname" start="183" select="quick">	</span><span class="whitespace" start="184">     </span><span class="op" start="189">|</span><span class="qname" start="190" select="quick">db:glossdiv</span><span class="op" start="201">|</span><span class="qname" start="202" select="quick">db:important</span><span class="op" start="214">|</span><span class="qname" start="215" select="quick">db:indexdiv</span><span class="op" start="226">|</span><span class="qname" start="227" select="quick">db:itemizedlist</span><span class="whitespace" start="242">
                     </span><span class="qname" start="243" select="quick">	</span><span class="qname" start="244" select="quick">	</span><span class="whitespace" start="245">     </span><span class="op" start="250">|</span><span class="qname" start="251" select="quick">db:legalnotice</span><span class="op" start="265">|</span><span class="qname" start="266" select="quick">db:lot</span><span class="op" start="272">|</span><span class="qname" start="273" select="quick">db:msg</span><span class="op" start="279">|</span><span class="qname" start="280" select="quick">db:msgexplan</span><span class="op" start="292">|</span><span class="qname" start="293" select="quick">db:msgmain</span><span class="whitespace" start="303">
                     </span><span class="qname" start="304" select="quick">	</span><span class="qname" start="305" select="quick">	</span><span class="whitespace" start="306">     </span><span class="op" start="311">|</span><span class="qname" start="312" select="quick">db:msgrel</span><span class="op" start="321">|</span><span class="qname" start="322" select="quick">db:msgset</span><span class="op" start="331">|</span><span class="qname" start="332" select="quick">db:msgsub</span><span class="op" start="341">|</span><span class="qname" start="342" select="quick">db:note</span><span class="op" start="349">|</span><span class="qname" start="350" select="quick">db:orderedlist</span><span class="whitespace" start="364">
                     </span><span class="qname" start="365" select="quick">	</span><span class="qname" start="366" select="quick">	</span><span class="whitespace" start="367">     </span><span class="op" start="372">|</span><span class="qname" start="373" select="quick">db:partintro</span><span class="op" start="385">|</span><span class="qname" start="386" select="quick">db:productionset</span><span class="op" start="402">|</span><span class="qname" start="403" select="quick">db:qandadiv</span><span class="whitespace" start="414">
                     </span><span class="qname" start="415" select="quick">	</span><span class="qname" start="416" select="quick">	</span><span class="whitespace" start="417">     </span><span class="op" start="422">|</span><span class="qname" start="423" select="quick">db:refsynopsisdiv</span><span class="op" start="440">|</span><span class="qname" start="441" select="quick">db:segmentedlist</span><span class="op" start="457">|</span><span class="qname" start="458" select="quick">db:set</span><span class="op" start="464">|</span><span class="qname" start="465" select="quick">db:setindex</span><span class="whitespace" start="476">
                     </span><span class="qname" start="477" select="quick">	</span><span class="qname" start="478" select="quick">	</span><span class="whitespace" start="479">     </span><span class="op" start="484">|</span><span class="qname" start="485" select="quick">db:sidebar</span><span class="op" start="495">|</span><span class="qname" start="496" select="quick">db:tip</span><span class="op" start="502">|</span><span class="qname" start="503" select="quick">db:toc</span><span class="op" start="509">|</span><span class="qname" start="510" select="quick">db:variablelist</span><span class="op" start="525">|</span><span class="qname" start="526" select="quick">db:warning</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5223"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5231" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5233"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5241" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5243"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx5257" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> catch-all for things with (possibly optional) titles </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w5263"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5279"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5295" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5297"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5311" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5313"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5327" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5329"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx5343" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5347" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5351" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5353"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:author</span><span class="op" start="10">|</span><span class="qname" start="11" select="quick">db:editor</span><span class="op" start="20">|</span><span class="qname" start="21" select="quick">db:othercredit</span><span class="op" start="35">|</span><span class="qname" start="36" select="quick">db:personname</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5375"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5383" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5385"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5393" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5395"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}person-name" class="solar"><span class="tcall">t:person-name</span></a><span class="z">"</span><span id="wx5403" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5407" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5409"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:authorgroup</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5425"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5433" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5435"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5443" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5445"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/common.xsl.html#t?{http://docbook.org/xslt/ns/template}person-name-list" class="solar"><span class="tcall">t:person-name-list</span></a><span class="z">"</span><span id="wx5453" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5457" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5459"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:figure</span><span class="op" start="10">|</span><span class="qname" start="11" select="quick">db:example</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:table</span><span class="op" start="30">|</span><span class="qname" start="31" select="quick">db:equation</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5481"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5489" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5491"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5499" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5501"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5517"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5533" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5535"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5549" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5551"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5565" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5569" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5573" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5575"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:procedure</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5591"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5599" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5601"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5609" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5611"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span id="wx5619" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5621"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5637"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5653" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5655"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5669" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5671"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5685" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5687"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx5701" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5705" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5709" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5711"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:cmdsynopsis</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5727"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="15" select="quick">(</span><span class="context" start="2">.</span><span class="step" start="3">//</span><span class="qname" start="5" select="quick">db:command</span><span class="parenthesis" start="15">)</span><span class="filter" start="16" pair-end="18" select="quick">[</span><span class="numeric" start="17">1</span><span class="filter" start="18">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span id="wx5748" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5752" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5754"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:funcsynopsis</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5770"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="16" select="quick">(</span><span class="context" start="2">.</span><span class="step" start="3">//</span><span class="qname" start="5" select="quick">db:function</span><span class="parenthesis" start="16">)</span><span class="filter" start="17" pair-end="19" select="quick">[</span><span class="numeric" start="18">1</span><span class="filter" start="19">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span id="wx5791" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5795" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5797"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:dedication</span><span class="op" start="14">|</span><span class="qname" start="15" select="quick">db:preface</span><span class="whitespace" start="25">
                     </span><span class="qname" start="26" select="quick">	</span><span class="qname" start="27" select="quick">	</span><span class="whitespace" start="28">     </span><span class="op" start="33">|</span><span class="qname" start="34" select="quick">db:chapter</span><span class="op" start="44">|</span><span class="qname" start="45" select="quick">db:appendix</span><span class="op" start="56">|</span><span class="qname" start="57" select="quick">db:article</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5825"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5833" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5835"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5843" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5845"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5861"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5877" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5879"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx5893" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5895"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx5909" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5913" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5917" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5919"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliography</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5935"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx5943" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5945"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx5953" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5955"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5971"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx5987" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5989"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6003" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6005"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6019" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6023" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6027" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6029"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:biblioentry</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:bibliomixed</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6047"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6055" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6057"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6065" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6067"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="63" select="quick">(</span><span class="axis" start="2">ancestor::</span><span class="qname" start="12" select="quick">db:bibliography</span><span class="whitespace" start="27">
                                     </span><span class="qname" start="28" select="quick">	</span><span class="qname" start="29" select="quick">	</span><span class="qname" start="30" select="quick">	</span><span class="qname" start="31" select="quick">	</span><span class="whitespace" start="32">       </span><span class="op" start="39">|</span><span class="axis" start="40">ancestor::</span><span class="qname" start="50" select="quick">db:bibliolist</span><span class="parenthesis" start="63">)</span><span class="filter" start="64" pair-end="71" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="65" pair-end="70" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="70">)</span><span class="filter" start="71">]</span><span class="z">"</span><span id="wx6098" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> handles both biblioentry and bibliomixed </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w6104"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6108"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?bibliography.numbered" class="solar"><span class="variable" start="1" select="quick">$bibliography.numbered</span></a><span class="whitespace" start="23"> </span><span class="op" start="24">!=</span><span class="whitespace" start="26"> </span><span class="numeric" start="27">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6122"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6126"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:bibliography</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w6139"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:bibliography</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:biblioentry|db:bibliomixed</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx6165" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6169" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w6171"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w6175"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:bibliolist</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:biblioentry|db:bibliomixed</span><span class="z">"</span><span class="z">
            		      </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx6201" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6205" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6209" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6213" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6215"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="filter" start="2" pair-end="4" select="quick">[</span><span class="numeric" start="3">1</span><span class="filter" start="4">]</span><span class="step" start="5">/</span><span class="axis" start="6">self::</span><span class="qname" start="12" select="quick">db:abbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6231"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="filter" start="2" pair-end="4" select="quick">[</span><span class="numeric" start="3">1</span><span class="filter" start="4">]</span><span class="z">"</span><span id="wx6242" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6246" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6248"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6252"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">id</span><span class="z">"</span><span id="wx6261" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6265" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6269" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6273" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6275"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6291"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6299" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6301"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6309" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6311"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6327"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6343" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6345"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6359" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6361"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6375" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6379" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6383" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6385"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6401"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6405"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?glossentry.show.acronym" class="solar"><span class="variable" start="1" select="quick">$glossentry.show.acronym</span></a><span class="whitespace" start="25"> </span><span class="op" start="26">=</span><span class="whitespace" start="27"> </span><span class="op">'</span><span class="literal" start="28">primary</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6421"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w6425"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:acronym</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:abbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w6437"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="22" select="quick">(</span><span class="qname" start="2" select="quick">db:acronym</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:abbrev</span><span class="parenthesis" start="22">)</span><span class="filter" start="23" pair-end="25" select="quick">[</span><span class="numeric" start="24">1</span><span class="filter" start="25">]</span><span class="z">"</span><span id="wx6452" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6456" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w6458"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w6462"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossterm</span><span class="filter" start="13" pair-end="15" select="quick">[</span><span class="numeric" start="14">1</span><span class="filter" start="15">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span id="wx6479" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6483" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6487" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6491" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6493"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6497"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossterm</span><span class="filter" start="13" pair-end="15" select="quick">[</span><span class="numeric" start="14">1</span><span class="filter" start="15">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span id="wx6514" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6518" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6522" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6526" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6528"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossterm</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6544"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx6546" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6550" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6552"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:index</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6568"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6576" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6578"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6586" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6588"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6604"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6620" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6622"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6636" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6638"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6652" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6656" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6660" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6662"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:listitem</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6678"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6686" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6688"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6696" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6698"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx6712" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6714"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6730"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6746" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6748"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6762" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6764"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6778" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6780"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx6794" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6798" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6802" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6804"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:simplesect</span><span class="whitespace" start="25">
                                          </span><span class="op" start="47">|</span><span class="qname" start="48" select="quick">db:sect1</span><span class="op" start="56">|</span><span class="qname" start="57" select="quick">db:sect2</span><span class="op" start="65">|</span><span class="qname" start="66" select="quick">db:sect3</span><span class="op" start="74">|</span><span class="qname" start="75" select="quick">db:sect4</span><span class="op" start="83">|</span><span class="qname" start="84" select="quick">db:sect5</span><span class="whitespace" start="92">
                                          </span><span class="op" start="114">|</span><span class="qname" start="115" select="quick">db:refsect1</span><span class="op" start="126">|</span><span class="qname" start="127" select="quick">db:refsect2</span><span class="op" start="138">|</span><span class="qname" start="139" select="quick">db:refsect3</span><span class="op" start="150">|</span><span class="qname" start="151" select="quick">db:refsection</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6842"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6850" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6852"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6860" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6862"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6878"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx6894" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6896"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx6910" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6912"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx6926" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6930" class="ec">&gt;</span></span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> FIXME: What about "in Chapter X"? </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6938" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6940"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bridgehead</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6956"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx6964" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6966"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx6974" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6976"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6992"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7008" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7010"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7024" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7026"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7040" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7044" class="ec">&gt;</span></span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> FIXME: What about "in Chapter X"? </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7052" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7054"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaset</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7070"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7078" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7080"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7088" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7090"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx7104" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7106"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7122"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7138" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7140"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7154" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7156"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7170" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7172"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx7186" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7190" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7194" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7196"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandadiv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7212"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7220" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7222"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7230" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7232"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx7246" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7248"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7264"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7280" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7282"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7296" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7298"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7312" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7314"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span id="wx7328" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7332" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7336" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7338"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7354"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7362" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7364"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7372" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7374"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:question</span><span class="filter" start="12" pair-end="14" select="quick">[</span><span class="numeric" start="13">1</span><span class="filter" start="14">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7393"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7409" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7411"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7425" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7427"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7441" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7445" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7449" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7451"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:question</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:answer</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7469"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7477" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7479"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7487" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7489"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7505"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7521" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7523"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7537" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7539"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7553" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7557" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7561" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7563"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:part</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:reference</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7581"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7589" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7591"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7599" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7601"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7617"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx7633" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7635"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7649" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7651"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7665" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7669" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7673" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7675"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7691"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7699" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7701"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7709" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7711"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7715"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refmeta</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">db:refentrytitle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7727"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refmeta</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">db:refentrytitle</span><span class="z">"</span><span id="wx7737" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7741" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7743"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7747"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refnamediv</span><span class="step" start="14">/</span><span class="qname" start="15" select="quick">db:refname</span><span class="filter" start="25" pair-end="27" select="quick">[</span><span class="numeric" start="26">1</span><span class="filter" start="27">]</span><span class="z">"</span><span id="wx7760" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx7764" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx7768" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7770"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refmeta</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">db:manvolnum</span><span class="z">"</span><span id="wx7780" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7784" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7786"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refnamediv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7802"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7810" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7812"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7820" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7822"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refname</span><span class="filter" start="11" pair-end="13" select="quick">[</span><span class="numeric" start="12">1</span><span class="filter" start="13">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7841"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx7855" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7857"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx7871" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx7875" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7879" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7881"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refname</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7897"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7905" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7907"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7915" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7917"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx7919" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx7923" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7925"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:step</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7941"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx7949" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7951"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx7959" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7961"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7971"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">Step</span><span class="op">'</span><span class="z">"</span><span id="wx7987" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx7991" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7993"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt"> </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx7999" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8001"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:number</span><span class="z">"</span><span id="wx8015" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8019" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8021"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:varlistentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8037"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8045" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8047"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8055" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8057"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:term</span><span class="filter" start="8" pair-end="10" select="quick">[</span><span class="numeric" start="9">1</span><span class="filter" start="10">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8076"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx8090" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8092"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx8106" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx8110" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8114" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8116"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:varlistentry</span><span class="step" start="16">/</span><span class="qname" start="17" select="quick">db:term</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8134"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8142" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8144"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8152" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> to avoid the comma that will be generated if there are several terms </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w8158"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx8160" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8164" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8166"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:co</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8182"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8190" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8192"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8200" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8202"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:callout-bug</span><span class="z">"</span><span id="wx8216" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8220" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8222"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:areaset</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8238"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/callouts.xsl.html#t?{http://docbook.org/xslt/ns/template}callout-bug" class="solar"><span class="tcall">t:callout-bug</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8248"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">conum</span><span class="z">"</span><span class="z">
                		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="71" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">preceding-sibling::</span><span class="qname" start="26" select="quick">db:areaset</span><span class="whitespace" start="36">
                        </span><span class="qname" start="37" select="quick">	</span><span class="qname" start="38" select="quick">	</span><span class="qname" start="39" select="quick">	</span><span class="whitespace" start="40">    </span><span class="op" start="44">|</span><span class="axis" start="45">preceding-sibling::</span><span class="qname" start="64" select="quick">db:area</span><span class="parenthesis" start="71">)</span><span class="whitespace" start="72">
                        </span><span class="qname" start="73" select="quick">	</span><span class="qname" start="74" select="quick">	</span><span class="qname" start="75" select="quick">	</span><span class="whitespace" start="76">    </span><span class="op" start="80">+</span><span class="numeric" start="81">1</span><span class="z">"</span><span id="wx8281" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx8285" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8289" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8291"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:area</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8307"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/callouts.xsl.html#t?{http://docbook.org/xslt/ns/template}callout-bug" class="solar"><span class="tcall">t:callout-bug</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8317"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">conum</span><span class="z">"</span><span class="z">
                		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="149" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:areaset</span><span class="step" start="25">/</span><span class="axis" start="26">preceding-sibling::</span><span class="qname" start="45" select="quick">db:areaset</span><span class="whitespace" start="55">
                        </span><span class="qname" start="56" select="quick">	</span><span class="qname" start="57" select="quick">	</span><span class="qname" start="58" select="quick">	</span><span class="whitespace" start="59">          </span><span class="op" start="69">|</span><span class="axis" start="70">parent::</span><span class="qname" start="78" select="quick">db:areaset</span><span class="step" start="88">/</span><span class="axis" start="89">preceding-sibling::</span><span class="qname" start="108" select="quick">db:area</span><span class="whitespace" start="115">
                        </span><span class="qname" start="116" select="quick">	</span><span class="qname" start="117" select="quick">	</span><span class="qname" start="118" select="quick">	</span><span class="qname" start="119" select="quick">	</span><span class="whitespace" start="120">  </span><span class="op" start="122">|</span><span class="axis" start="123">preceding-sibling::</span><span class="qname" start="142" select="quick">db:area</span><span class="parenthesis" start="149">)</span><span class="whitespace" start="150">
                        </span><span class="qname" start="151" select="quick">	</span><span class="qname" start="152" select="quick">	</span><span class="qname" start="153" select="quick">	</span><span class="whitespace" start="154">    </span><span class="op" start="158">+</span><span class="numeric" start="159">1</span><span class="z">"</span><span id="wx8365" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx8369" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8373" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8375"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8391"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8399" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8401"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8409" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8411"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:object-xref-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8427"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">purpose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">xref</span><span class="op">'</span><span class="z">"</span><span id="wx8443" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8445"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">xrefstyle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xrefstyle</span><span class="z">"</span><span id="wx8459" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8461"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">referrer</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$referrer</span><span class="z">"</span><span id="wx8475" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx8479" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8483" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8485"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:para</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8501"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?referrer">referrer</span><span class="z">"</span><span id="wx8509" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8511"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xrefstyle">xrefstyle</span><span class="z">"</span><span id="wx8519" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8521"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="1383" select="quick">(</span><span class="axis" start="2">ancestor::</span><span class="qname" start="12" select="quick">db:simplesect</span><span class="whitespace" start="25">
                                                                            </span><span class="op" start="65">|</span><span class="axis" start="66">ancestor::</span><span class="qname" start="76" select="quick">db:section</span><span class="whitespace" start="86">
                                                                            </span><span class="op" start="126">|</span><span class="axis" start="127">ancestor::</span><span class="qname" start="137" select="quick">db:sect1</span><span class="whitespace" start="145">
                                                                            </span><span class="op" start="185">|</span><span class="axis" start="186">ancestor::</span><span class="qname" start="196" select="quick">db:sect2</span><span class="whitespace" start="204">
                                                                            </span><span class="op" start="244">|</span><span class="axis" start="245">ancestor::</span><span class="qname" start="255" select="quick">db:sect3</span><span class="whitespace" start="263">
                                                                            </span><span class="op" start="303">|</span><span class="axis" start="304">ancestor::</span><span class="qname" start="314" select="quick">db:sect4</span><span class="whitespace" start="322">
                                                                            </span><span class="op" start="362">|</span><span class="axis" start="363">ancestor::</span><span class="qname" start="373" select="quick">db:sect5</span><span class="whitespace" start="381">
                                                                            </span><span class="op" start="421">|</span><span class="axis" start="422">ancestor::</span><span class="qname" start="432" select="quick">db:refsection</span><span class="whitespace" start="445">
                                                                            </span><span class="op" start="485">|</span><span class="axis" start="486">ancestor::</span><span class="qname" start="496" select="quick">db:refsect1</span><span class="whitespace" start="507">
                                                                            </span><span class="op" start="547">|</span><span class="axis" start="548">ancestor::</span><span class="qname" start="558" select="quick">db:refsect2</span><span class="whitespace" start="569">
                                                                            </span><span class="op" start="609">|</span><span class="axis" start="610">ancestor::</span><span class="qname" start="620" select="quick">db:refsect3</span><span class="whitespace" start="631">
                                                                            </span><span class="op" start="671">|</span><span class="axis" start="672">ancestor::</span><span class="qname" start="682" select="quick">db:chapter</span><span class="whitespace" start="692">
                                                                            </span><span class="op" start="732">|</span><span class="axis" start="733">ancestor::</span><span class="qname" start="743" select="quick">db:appendix</span><span class="whitespace" start="754">
                                                                            </span><span class="op" start="794">|</span><span class="axis" start="795">ancestor::</span><span class="qname" start="805" select="quick">db:preface</span><span class="whitespace" start="815">
                                                                            </span><span class="op" start="855">|</span><span class="axis" start="856">ancestor::</span><span class="qname" start="866" select="quick">db:partintro</span><span class="whitespace" start="878">
                                                                            </span><span class="op" start="918">|</span><span class="axis" start="919">ancestor::</span><span class="qname" start="929" select="quick">db:dedication</span><span class="whitespace" start="942">
                                                                            </span><span class="op" start="982">|</span><span class="axis" start="983">ancestor::</span><span class="qname" start="993" select="quick">db:colophon</span><span class="whitespace" start="1004">
                                                                            </span><span class="op" start="1044">|</span><span class="axis" start="1045">ancestor::</span><span class="qname" start="1055" select="quick">db:bibliography</span><span class="whitespace" start="1070">
                                                                            </span><span class="op" start="1110">|</span><span class="axis" start="1111">ancestor::</span><span class="qname" start="1121" select="quick">db:index</span><span class="whitespace" start="1129">
                                                                            </span><span class="op" start="1169">|</span><span class="axis" start="1170">ancestor::</span><span class="qname" start="1180" select="quick">db:glossary</span><span class="whitespace" start="1191">
                                                                            </span><span class="op" start="1231">|</span><span class="axis" start="1232">ancestor::</span><span class="qname" start="1242" select="quick">db:glossentry</span><span class="whitespace" start="1255">
                                                                            </span><span class="op" start="1295">|</span><span class="axis" start="1296">ancestor::</span><span class="qname" start="1306" select="quick">db:listitem</span><span class="whitespace" start="1317">
                                                                            </span><span class="op" start="1357">|</span><span class="axis" start="1358">ancestor::</span><span class="qname" start="1368" select="quick">db:varlistentry</span><span class="parenthesis" start="1383">)</span><span class="filter" start="1384" pair-end="1391" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="1385" pair-end="1390" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="1390">)</span><span class="filter" start="1391">]</span><span class="z">"</span><span id="wx8631" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8633"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref-to</span><span class="z">"</span><span id="wx8647" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8651" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w8657"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8673"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for inserting markup in an xref</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx8679" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8681"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8685"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is (sometimes) used when generating cross references.
Any element processed
in this mode should generate markup appropriate to appear in a
cross-reference.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8691" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx8695" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx8699" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8701"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">title</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8717"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx8719" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8723" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8725"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">command</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8741"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/inlines.xsl.html#t?{http://docbook.org/xslt/ns/template}inline-boldseq" class="solar"><span class="tcall">t:inline-boldseq</span></a><span class="z">"</span><span id="wx8749" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8753" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8755"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">function</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:xref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8771"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/inlines.xsl.html#t?{http://docbook.org/xslt/ns/template}inline-monoseq" class="solar"><span class="tcall">t:inline-monoseq</span></a><span class="z">"</span><span id="wx8779" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx8783" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx8787" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>